import{m as k,j as e,L as A,$ as q,t as u}from"./app-CQvyAInf.js";import{A as w}from"./app-layout-mQZNAdUE.js";import{B as d}from"./button-qelRmArg.js";import{I as p}from"./input-Blf29Qex.js";import{L as l}from"./label-DXuQz94P.js";import{S as x,a as h,b as j,c as v,d as g}from"./select-DsVvSlVc.js";import{T as K}from"./textarea-Ck1X0zwf.js";import{S as $}from"./switch-Mki_i8nL.js";import{C as L,a as D,b as E,c as F}from"./card-D2Gq_jtJ.js";import"./app-CbyD8i4Z.js";import"./index-Dh4Dnqzu.js";import"./utils-jAU0Cazi.js";import"./createLucideIcon-CDtDhRNb.js";import"./index-Csg-B5yo.js";import"./index-B6QC96uA.js";import"./app-logo-icon-CYEPLqCw.js";import"./car-front-3ODHaHDz.js";import"./package-BH85mpxF.js";import"./index-D1Z7h3vH.js";import"./check-3WY5HJZB.js";function ie({categories:N,produits:f}){const{data:a,setData:c,post:C,processing:o,errors:t}=k({nom:"",description:"",categorie_id:"",is_active:!0,articles:[]}),_=[{title:"Gestion des Kits",href:"/kits"},{title:"Créer un Kit",href:"/kits/create"}],y=s=>{s.preventDefault(),C(route("kits.store"),{onSuccess:()=>{u.success("Kit créé avec succès")},onError:()=>{u.error("Une erreur est survenue lors de la création")}})},S=()=>{c("articles",[...a.articles,{medical_produit_id:"",quantite:1}])},b=s=>{const i=[...a.articles];i.splice(s,1),c("articles",i)},m=(s,i,r)=>{const n=[...a.articles];n[s]={...n[s],[i]:r},c("articles",n)};return e.jsxs(w,{breadcrumbs:_,children:[e.jsx(A,{title:"Créer un Kit"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs(L,{children:[e.jsx(D,{children:e.jsx(E,{children:"Création du Kit"})}),e.jsx(F,{children:e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"nom",children:"Nom du Kit*"}),e.jsx(p,{id:"nom",value:a.nom,onChange:s=>c("nom",s.target.value),placeholder:"Nom du kit",required:!0}),t.nom&&e.jsx("p",{className:"text-sm text-red-500",children:t.nom})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"categorie_id",children:"Catégorie*"}),e.jsxs(x,{value:a.categorie_id,onValueChange:s=>c("categorie_id",s),required:!0,children:[e.jsx(h,{children:e.jsx(j,{placeholder:"Sélectionner une catégorie"})}),e.jsx(v,{children:N.map(s=>e.jsx(g,{value:s.id.toString(),children:s.nom},s.id))})]}),t.categorie_id&&e.jsx("p",{className:"text-sm text-red-500",children:t.categorie_id})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($,{id:"is_active",checked:a.is_active,onCheckedChange:s=>c("is_active",s)}),e.jsx(l,{htmlFor:"is_active",children:"Kit actif"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"description",children:"Description"}),e.jsx(K,{id:"description",value:a.description,onChange:s=>c("description",s.target.value),placeholder:"Description du kit (optionnel)",rows:3}),t.description&&e.jsx("p",{className:"text-sm text-red-500",children:t.description})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(l,{children:"Articles du Kit"}),e.jsx(d,{type:"button",variant:"outline",size:"sm",onClick:S,children:"Ajouter un article"})]}),a.articles.length>0?e.jsx("div",{className:"space-y-4 border px-4 py-4 rounded-2xl",children:a.articles.map((s,i)=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Produit*"}),e.jsxs(x,{value:s.medical_produit_id,onValueChange:r=>m(i,"medical_produit_id",r),required:!0,children:[e.jsx(h,{children:e.jsx(j,{placeholder:"Sélectionner un produit"})}),e.jsx(v,{children:f.map(r=>e.jsxs(g,{value:r.id.toString(),children:[r.name," (",r.unite,")"]},r.id))})]}),t[`articles.${i}.medical_produit_id`]&&e.jsx("p",{className:"text-sm text-red-500",children:t[`articles.${i}.medical_produit_id`]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Quantité*"}),e.jsx(p,{type:"number",min:"1",value:s.quantite,onChange:r=>m(i,"quantite",parseInt(r.target.value)),required:!0}),t[`articles.${i}.quantite`]&&e.jsx("p",{className:"text-sm text-red-500",children:t[`articles.${i}.quantite`]})]}),e.jsx("div",{children:e.jsx(d,{type:"button",variant:"destructive",size:"sm",onClick:()=>b(i),children:"Supprimer"})})]},i))}):e.jsx("div",{className:"text-center text-gray-500 py-4",children:"Aucun article ajouté au kit"})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(d,{variant:"outline",asChild:!0,children:e.jsx(q,{href:route("kits.index"),children:"Annuler"})}),e.jsx(d,{type:"submit",disabled:o,children:o?"Enregistrement...":"Enregistrer"})]})]})})})]})})})})]})}export{ie as default};
//# sourceMappingURL=Create-DktBvjrd.js.map
