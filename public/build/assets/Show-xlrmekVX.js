import{r as v,j as e,L as N,$ as a,S as l,t as i}from"./app-CQvyAInf.js";import{B as r}from"./button-qelRmArg.js";import{B as t}from"./badge-CsRI51Hc.js";import{C as c,a as d,b as n,c as o}from"./card-D2Gq_jtJ.js";import{A as b,T as y}from"./app-layout-mQZNAdUE.js";import{C}from"./check-3WY5HJZB.js";import{I as _,B as w,C as A}from"./info-nzFAjv0M.js";import{C as S}from"./circle-alert-MX2DQFDa.js";import"./app-CbyD8i4Z.js";import"./index-Dh4Dnqzu.js";import"./utils-jAU0Cazi.js";import"./createLucideIcon-CDtDhRNb.js";import"./index-Csg-B5yo.js";import"./index-B6QC96uA.js";import"./app-logo-icon-CYEPLqCw.js";import"./car-front-3ODHaHDz.js";import"./package-BH85mpxF.js";const D={stock_faible:e.jsx(y,{className:"h-5 w-5"}),avertissement_expiration:e.jsx(A,{className:"h-5 w-5"}),expire:e.jsx(S,{className:"h-5 w-5"}),demande_transfert:e.jsx(w,{className:"h-5 w-5"}),systeme:e.jsx(_,{className:"h-5 w-5"})},m={stock_faible:"bg-amber-100 text-amber-800",avertissement_expiration:"bg-blue-100 text-blue-800",expire:"bg-red-100 text-red-800",demande_transfert:"bg-purple-100 text-purple-800",systeme:"bg-gray-100 text-gray-800"},k={faible:"bg-gray-100 text-gray-800",moyen:"bg-blue-100 text-blue-800",eleve:"bg-amber-100 text-amber-800",critique:"bg-red-100 text-red-800"};function Q({alert:s,types:x,priorities:p,auth:u}){const[B,h]=v.useState(!1),j=[{title:"Gestion des Alertes",href:"/alerts"},{title:`Alerte #${s.id}`,href:`/alerts/${s.ref}`}],f=()=>{l.post(route("alerts.resolve",s.ref),{preserveScroll:!0},{onSuccess:()=>{i.success("Alerte marquée comme résolue avec succès.")}})},g=()=>{l.delete(route("alerts.destroy",s.ref),{preserveScroll:!0,onSuccess:()=>{i.success("Alerte supprimée avec succès"),h(!1)},onError:()=>{i.error("Une erreur est survenue lors de la suppression")},onFinish:()=>{}})};return e.jsxs(b,{breadcrumbs:j,children:[e.jsx(N,{title:`Détails de l'Alerte ${s.ref}`}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h1",{className:"text-2xl font-bold",children:["Alerte #",s.id]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(t,{className:m[s.type],children:x[s.type]}),e.jsx(t,{className:k[s.priorite],children:p[s.priorite]}),s.is_resolved?e.jsxs(t,{className:"bg-green-100 text-green-800",children:[e.jsx(C,{className:"h-4 w-4 mr-1"})," Résolue"]}):e.jsx(t,{variant:"destructive",children:"En attente"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(c,{children:[e.jsx(d,{children:e.jsx(n,{children:"Détails de l'Alerte"})}),e.jsxs(o,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-3 rounded-full ${m[s.type]}`,children:D[s.type]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:s.titre}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Créée le ",new Date(s.created_at).toLocaleString()]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Message"}),e.jsx("p",{className:"whitespace-pre-line",children:s.message})]})]})]}),e.jsxs(c,{children:[e.jsx(d,{children:e.jsx(n,{children:"Informations supplémentaires"})}),e.jsxs(o,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Hôpital"}),e.jsx("p",{children:s.hopital.nom})]}),s.medical_produit&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Produit Médical"}),e.jsx("p",{children:s.medical_produit.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Créée par"}),e.jsx("p",{children:s.user.name})]}),s.is_resolved&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Résolue par"}),e.jsx("p",{children:s.resolved_by.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Date de résolution"}),e.jsx("p",{children:new Date(s.resolved_at).toLocaleString()})]})]})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(r,{variant:"outline",asChild:!0,children:e.jsx(a,{href:route("alerts.index"),children:"Retour à la liste"})}),!s.is_resolved&&e.jsxs(e.Fragment,{children:[e.jsx(r,{asChild:!0,children:e.jsx(a,{href:route("alerts.edit",s.ref),children:"Modifier"})}),e.jsx(r,{variant:"secondary",onClick:f,children:"Marquer comme résolue"}),s.user_id==u.user.id&&e.jsx(r,{variant:"destructive",onClick:g,children:"Annuler le transfert"})]})]})]})})]})}export{Q as default};
//# sourceMappingURL=Show-xlrmekVX.js.map
