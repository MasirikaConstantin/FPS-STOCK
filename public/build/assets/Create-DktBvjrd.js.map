{"version":3,"file":"Create-DktBvjrd.js","sources":["../../../resources/js/pages/Kits/Create.tsx"],"sourcesContent":["import AppLayout from '@/layouts/app-layout';\nimport { BreadcrumbItem } from '@/types';\nimport { PageProps } from '@/types/types';\nimport { Head, Link, router, useForm } from '@inertiajs/react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Switch } from '@/components/ui/switch';\nimport { toast } from 'sonner';\nimport { FormEventHandler } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\n\nexport default function Create({ categories, produits }: PageProps<{ categories: App.Categorie[] }>) {\n    const { data, setData, post, processing, errors } = useForm({\n        nom: '',\n        description: '',\n        categorie_id: '',\n        is_active: true,\n        articles: [] as Array<{\n            medical_produit_id: string;\n            quantite: number;\n        }>,\n    });\n\n    const breadcrumbs: BreadcrumbItem[] = [\n        {\n            title: 'Gestion des Kits',\n            href: '/kits',\n        },\n        {\n            title: 'Créer un Kit',\n            href: '/kits/create',\n        },\n    ];\n\n    const submit: FormEventHandler = (e) => {\n        e.preventDefault();\n\n        post(route('kits.store'), {\n            onSuccess: () => {\n                toast.success('Kit créé avec succès');\n            },\n            onError: () => {\n                toast.error('Une erreur est survenue lors de la création');\n            },\n        });\n    };\n\n    const addArticle = () => {\n        setData('articles', [\n            ...data.articles,\n            { medical_produit_id: '', quantite: 1 },\n        ]);\n    };\n\n    const removeArticle = (index: number) => {\n        const newArticles = [...data.articles];\n        newArticles.splice(index, 1);\n        setData('articles', newArticles);\n    };\n\n    const updateArticle = (index: number, field: string, value: any) => {\n        const newArticles = [...data.articles];\n        newArticles[index] = { ...newArticles[index], [field]: value };\n        setData('articles', newArticles);\n    };\n\n    return (\n        <AppLayout breadcrumbs={breadcrumbs}>\n            <Head title=\"Créer un Kit\" />\n\n            <div className=\"py-12\">\n                <div className=\"mx-auto max-w-7xl sm:px-6 lg:px-8\">\n                    <div className=\"overflow-hidden shadow-sm sm:rounded-lg\">\n                        <Card>\n                            <CardHeader>\n                                <CardTitle>\n                                    Création du Kit\n                                </CardTitle>\n                            </CardHeader>\n                            <CardContent>\n                            <div className=\"p-6\">\n                                <form onSubmit={submit} className=\"space-y-6\">\n                                    <div className=\"grid grid-cols-1 gap-6 md:grid-cols-2\">\n                                        <div className=\"space-y-2\">\n                                            <Label htmlFor=\"nom\">Nom du Kit*</Label>\n                                            <Input\n                                                id=\"nom\"\n                                                value={data.nom}\n                                                onChange={(e) => setData('nom', e.target.value)}\n                                                placeholder=\"Nom du kit\"\n                                                required\n                                            />\n                                            {errors.nom && <p className=\"text-sm text-red-500\">{errors.nom}</p>}\n                                        </div>\n\n                                        <div className=\"space-y-2\">\n                                            <Label htmlFor=\"categorie_id\">Catégorie*</Label>\n                                            <Select\n                                                value={data.categorie_id}\n                                                onValueChange={(value) => setData('categorie_id', value)}\n                                                required\n                                            >\n                                                <SelectTrigger>\n                                                    <SelectValue placeholder=\"Sélectionner une catégorie\" />\n                                                </SelectTrigger>\n                                                <SelectContent>\n                                                    {categories.map((categorie) => (\n                                                        <SelectItem key={categorie.id} value={categorie.id.toString()}>\n                                                            {categorie.nom}\n                                                        </SelectItem>\n                                                    ))}\n                                                </SelectContent>\n                                            </Select>\n                                            {errors.categorie_id && <p className=\"text-sm text-red-500\">{errors.categorie_id}</p>}\n                                        </div>\n\n                                        <div className=\"flex items-center space-x-2\">\n                                            <Switch\n                                                id=\"is_active\"\n                                                checked={data.is_active}\n                                                onCheckedChange={(checked) => setData('is_active', checked)}\n                                            />\n                                            <Label htmlFor=\"is_active\">Kit actif</Label>\n                                        </div>\n                                    </div>\n\n                                    <div className=\"space-y-2\">\n                                        <Label htmlFor=\"description\">Description</Label>\n                                        <Textarea\n                                            id=\"description\"\n                                            value={data.description}\n                                            onChange={(e) => setData('description', e.target.value)}\n                                            placeholder=\"Description du kit (optionnel)\"\n                                            rows={3}\n                                        />\n                                        {errors.description && <p className=\"text-sm text-red-500\">{errors.description}</p>}\n                                    </div>\n\n                                    <div className=\"space-y-4\">\n                                        <div className=\"flex justify-between items-center\">\n                                            <Label>Articles du Kit</Label>\n                                            <Button type=\"button\" variant=\"outline\" size=\"sm\" onClick={addArticle}>\n                                                Ajouter un article\n                                            </Button>\n                                        </div>\n\n                                        {data.articles.length > 0 ? (\n                                                                                    <div className=\"space-y-4 border px-4 py-4 rounded-2xl\">\n\n                                            {data.articles.map((article, index) => (\n                                                    <div key={index} className=\"grid grid-cols-1 md:grid-cols-3 gap-4 items-end\">\n                                                        <div className=\"space-y-2\">\n                                                            <Label>Produit*</Label>\n                                                            <Select\n                                                                value={article.medical_produit_id}\n                                                                onValueChange={(value) => updateArticle(index, 'medical_produit_id', value)}\n                                                                required\n                                                            >\n                                                                <SelectTrigger>\n                                                                    <SelectValue placeholder=\"Sélectionner un produit\" />\n                                                                </SelectTrigger>\n                                                                <SelectContent>\n                                                                    {produits.map((produit) => (\n                                                                        <SelectItem key={produit.id} value={produit.id.toString()}>\n                                                                            {produit.name} ({produit.unite})\n                                                                        </SelectItem>\n                                                                    ))}\n                                                                </SelectContent>\n                                                            </Select>\n                                                            {errors[`articles.${index}.medical_produit_id`] && (\n                                                                <p className=\"text-sm text-red-500\">{errors[`articles.${index}.medical_produit_id`]}</p>\n                                                            )}\n                                                        </div>\n\n                                                        <div className=\"space-y-2\">\n                                                            <Label>Quantité*</Label>\n                                                            <Input\n                                                                type=\"number\"\n                                                                min=\"1\"\n                                                                value={article.quantite}\n                                                                onChange={(e) => updateArticle(index, 'quantite', parseInt(e.target.value))}\n                                                                required\n                                                            />\n                                                            {errors[`articles.${index}.quantite`] && (\n                                                                <p className=\"text-sm text-red-500\">{errors[`articles.${index}.quantite`]}</p>\n                                                            )}\n                                                        </div>\n\n                                                        <div>\n                                                            <Button\n                                                                type=\"button\"\n                                                                variant=\"destructive\"\n                                                                size=\"sm\"\n                                                                onClick={() => removeArticle(index)}\n                                                            >\n                                                                Supprimer\n                                                            </Button>\n                                                        </div>\n                                                    </div>\n                                                ))}\n                                            </div>\n                                        ) : (\n                                            <div className=\"text-center text-gray-500 py-4\">\n                                                Aucun article ajouté au kit\n                                            </div>\n                                        )}\n                                    </div>\n\n                                    <div className=\"flex justify-end space-x-4\">\n                                        <Button variant=\"outline\" asChild>\n                                            <Link href={route('kits.index')}>Annuler</Link>\n                                        </Button>\n                                        <Button type=\"submit\" disabled={processing}>\n                                            {processing ? 'Enregistrement...' : 'Enregistrer'}\n                                        </Button>\n                                    </div>\n                                </form>\n                            </div>\n                            </CardContent>\n                        </Card>\n                        \n                    </div>\n                </div>\n            </div>\n        </AppLayout>\n    );\n}"],"names":["Create","categories","produits","data","setData","post","processing","errors","useForm","breadcrumbs","submit","e","toast","addArticle","removeArticle","index","newArticles","updateArticle","field","value","jsxs","AppLayout","jsx","Head","Card","CardHeader","CardTitle","CardContent","Label","Input","Select","SelectTrigger","SelectValue","SelectContent","categorie","SelectItem","Switch","checked","Textarea","Button","article","produit","Link"],"mappings":"wwBAcA,SAAwBA,GAAO,CAAE,WAAAC,EAAY,SAAAC,GAAwD,CACjG,KAAM,CAAE,KAAAC,EAAM,QAAAC,EAAS,KAAAC,EAAM,WAAAC,EAAY,OAAAC,GAAWC,EAAQ,CACxD,IAAK,GACL,YAAa,GACb,aAAc,GACd,UAAW,GACX,SAAU,CAAA,CAAC,CAId,EAEKC,EAAgC,CAClC,CACI,MAAO,mBACP,KAAM,OACV,EACA,CACI,MAAO,eACP,KAAM,cAAA,CAEd,EAEMC,EAA4BC,GAAM,CACpCA,EAAE,eAAe,EAEZN,EAAA,MAAM,YAAY,EAAG,CACtB,UAAW,IAAM,CACbO,EAAM,QAAQ,sBAAsB,CACxC,EACA,QAAS,IAAM,CACXA,EAAM,MAAM,6CAA6C,CAAA,CAC7D,CACH,CACL,EAEMC,EAAa,IAAM,CACrBT,EAAQ,WAAY,CAChB,GAAGD,EAAK,SACR,CAAE,mBAAoB,GAAI,SAAU,CAAE,CAAA,CACzC,CACL,EAEMW,EAAiBC,GAAkB,CACrC,MAAMC,EAAc,CAAC,GAAGb,EAAK,QAAQ,EACzBa,EAAA,OAAOD,EAAO,CAAC,EAC3BX,EAAQ,WAAYY,CAAW,CACnC,EAEMC,EAAgB,CAACF,EAAeG,EAAeC,IAAe,CAChE,MAAMH,EAAc,CAAC,GAAGb,EAAK,QAAQ,EACzBa,EAAAD,CAAK,EAAI,CAAE,GAAGC,EAAYD,CAAK,EAAG,CAACG,CAAK,EAAGC,CAAM,EAC7Df,EAAQ,WAAYY,CAAW,CACnC,EAGI,OAAAI,OAACC,GAAU,YAAAZ,EACP,SAAA,CAACa,EAAAA,IAAAC,EAAA,CAAK,MAAM,cAAe,CAAA,EAE1BD,MAAA,MAAA,CAAI,UAAU,QACX,SAACA,EAAA,IAAA,MAAA,CAAI,UAAU,oCACX,SAACA,EAAA,IAAA,MAAA,CAAI,UAAU,0CACX,gBAACE,EACG,CAAA,SAAA,CAAAF,MAACG,EACG,CAAA,SAAAH,EAAA,IAACI,EAAU,CAAA,SAAA,iBAEX,CAAA,EACJ,EACAJ,EAAA,IAACK,EACD,CAAA,SAAAL,EAAA,IAAC,MAAI,CAAA,UAAU,MACX,SAAAF,EAAA,KAAC,OAAK,CAAA,SAAUV,EAAQ,UAAU,YAC9B,SAAA,CAACU,EAAAA,KAAA,MAAA,CAAI,UAAU,wCACX,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,YACX,SAAA,CAACE,EAAA,IAAAM,EAAA,CAAM,QAAQ,MAAM,SAAW,cAAA,EAChCN,EAAA,IAACO,EAAA,CACG,GAAG,MACH,MAAO1B,EAAK,IACZ,SAAWQ,GAAMP,EAAQ,MAAOO,EAAE,OAAO,KAAK,EAC9C,YAAY,aACZ,SAAQ,EAAA,CACZ,EACCJ,EAAO,KAAOe,EAAA,IAAC,KAAE,UAAU,uBAAwB,WAAO,GAAI,CAAA,CAAA,EACnE,EAEAF,EAAAA,KAAC,MAAI,CAAA,UAAU,YACX,SAAA,CAACE,EAAA,IAAAM,EAAA,CAAM,QAAQ,eAAe,SAAU,aAAA,EACxCR,EAAA,KAACU,EAAA,CACG,MAAO3B,EAAK,aACZ,cAAgBgB,GAAUf,EAAQ,eAAgBe,CAAK,EACvD,SAAQ,GAER,SAAA,CAAAG,MAACS,EACG,CAAA,SAAAT,EAAA,IAACU,EAAY,CAAA,YAAY,4BAA6B,CAAA,EAC1D,QACCC,EACI,CAAA,SAAAhC,EAAW,IAAKiC,SACZC,EAA8B,CAAA,MAAOD,EAAU,GAAG,SAC9C,EAAA,SAAAA,EAAU,KADEA,EAAU,EAE3B,CACH,CACL,CAAA,CAAA,CAAA,CACJ,EACC3B,EAAO,cAAgBe,EAAA,IAAC,KAAE,UAAU,uBAAwB,WAAO,YAAa,CAAA,CAAA,EACrF,EAEAF,EAAAA,KAAC,MAAI,CAAA,UAAU,8BACX,SAAA,CAAAE,EAAA,IAACc,EAAA,CACG,GAAG,YACH,QAASjC,EAAK,UACd,gBAAkBkC,GAAYjC,EAAQ,YAAaiC,CAAO,CAAA,CAC9D,EACCf,EAAA,IAAAM,EAAA,CAAM,QAAQ,YAAY,SAAS,WAAA,CAAA,CAAA,CACxC,CAAA,CAAA,EACJ,EAEAR,EAAAA,KAAC,MAAI,CAAA,UAAU,YACX,SAAA,CAACE,EAAA,IAAAM,EAAA,CAAM,QAAQ,cAAc,SAAW,cAAA,EACxCN,EAAA,IAACgB,EAAA,CACG,GAAG,cACH,MAAOnC,EAAK,YACZ,SAAWQ,GAAMP,EAAQ,cAAeO,EAAE,OAAO,KAAK,EACtD,YAAY,iCACZ,KAAM,CAAA,CACV,EACCJ,EAAO,aAAee,EAAA,IAAC,KAAE,UAAU,uBAAwB,WAAO,WAAY,CAAA,CAAA,EACnF,EAEAF,EAAAA,KAAC,MAAI,CAAA,UAAU,YACX,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,oCACX,SAAA,CAAAE,EAAAA,IAACM,GAAM,SAAe,iBAAA,CAAA,EACtBN,EAAAA,IAACiB,EAAO,CAAA,KAAK,SAAS,QAAQ,UAAU,KAAK,KAAK,QAAS1B,EAAY,SAEvE,oBAAA,CAAA,CAAA,EACJ,EAECV,EAAK,SAAS,OAAS,EACoBmB,EAAAA,IAAC,OAAI,UAAU,yCAEtD,SAAKnB,EAAA,SAAS,IAAI,CAACqC,EAASzB,IACpBK,EAAAA,KAAA,MAAA,CAAgB,UAAU,kDACvB,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,YACX,SAAA,CAAAE,EAAAA,IAACM,GAAM,SAAQ,UAAA,CAAA,EACfR,EAAA,KAACU,EAAA,CACG,MAAOU,EAAQ,mBACf,cAAgBrB,GAAUF,EAAcF,EAAO,qBAAsBI,CAAK,EAC1E,SAAQ,GAER,SAAA,CAAAG,MAACS,EACG,CAAA,SAAAT,EAAA,IAACU,EAAY,CAAA,YAAY,yBAA0B,CAAA,EACvD,EACCV,EAAA,IAAAW,EAAA,CACI,SAAS/B,EAAA,IAAKuC,GACVrB,EAAA,KAAAe,EAAA,CAA4B,MAAOM,EAAQ,GAAG,SAC1C,EAAA,SAAA,CAAQA,EAAA,KAAK,KAAGA,EAAQ,MAAM,GAAA,GADlBA,EAAQ,EAEzB,CACH,CACL,CAAA,CAAA,CAAA,CACJ,EACClC,EAAO,YAAYQ,CAAK,qBAAqB,GAC1CO,EAAA,IAAC,IAAE,CAAA,UAAU,uBAAwB,SAAAf,EAAO,YAAYQ,CAAK,qBAAqB,CAAE,CAAA,CAAA,EAE5F,EAEAK,EAAAA,KAAC,MAAI,CAAA,UAAU,YACX,SAAA,CAAAE,EAAAA,IAACM,GAAM,SAAS,WAAA,CAAA,EAChBN,EAAA,IAACO,EAAA,CACG,KAAK,SACL,IAAI,IACJ,MAAOW,EAAQ,SACf,SAAW7B,GAAMM,EAAcF,EAAO,WAAY,SAASJ,EAAE,OAAO,KAAK,CAAC,EAC1E,SAAQ,EAAA,CACZ,EACCJ,EAAO,YAAYQ,CAAK,WAAW,GAChCO,EAAA,IAAC,IAAE,CAAA,UAAU,uBAAwB,SAAAf,EAAO,YAAYQ,CAAK,WAAW,CAAE,CAAA,CAAA,EAElF,QAEC,MACG,CAAA,SAAAO,EAAA,IAACiB,EAAA,CACG,KAAK,SACL,QAAQ,cACR,KAAK,KACL,QAAS,IAAMzB,EAAcC,CAAK,EACrC,SAAA,WAAA,CAAA,CAGL,CAAA,CA/CM,CAAA,EAAAA,CAgDV,CACH,CACL,CAAA,QAEC,MAAI,CAAA,UAAU,iCAAiC,SAEhD,6BAAA,CAAA,CAAA,EAER,EAEAK,EAAAA,KAAC,MAAI,CAAA,UAAU,6BACX,SAAA,CAAAE,EAAA,IAACiB,EAAO,CAAA,QAAQ,UAAU,QAAO,GAC7B,SAAAjB,EAAAA,IAACoB,EAAK,CAAA,KAAM,MAAM,YAAY,EAAG,SAAA,SAAO,CAAA,EAC5C,EACApB,EAAAA,IAACiB,GAAO,KAAK,SAAS,SAAUjC,EAC3B,SAAAA,EAAa,oBAAsB,aACxC,CAAA,CAAA,CACJ,CAAA,CAAA,CACJ,CAAA,CACJ,CAAA,CACA,CAAA,CAAA,EACJ,CAAA,CAEJ,EACJ,CACJ,CAAA,CAAA,EACJ,CAER"}