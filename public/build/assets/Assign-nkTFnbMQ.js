import{r as l,m as E,j as e,L as A,t as o}from"./app-DgZYpFq7.js";import{A as L}from"./app-layout-91MyU6xV.js";import{B as w}from"./button-DzvBAvYb.js";import{C as m,a as d,b as u,c as p}from"./card-p61obAJe.js";import{S as B,a as k,b as D,c as T,d as U}from"./select-BT17riR4.js";import{L as x}from"./label-F0jNYSZ-.js";import{C as _}from"./checkbox-J7IVMmyv.js";import{B as z}from"./badge-CwTEI7kw.js";import"./app-nklVn4u_.js";import"./index-C9XCcCFj.js";import"./utils-jAU0Cazi.js";import"./createLucideIcon-Bp4--aub.js";import"./index-DOjrUmdc.js";import"./index-DUIdKc2i.js";import"./app-logo-icon-Dkusirb4.js";import"./car-front-DHnhNWiQ.js";import"./package-CUTUJuVR.js";import"./index-DpRMzoqq.js";import"./check-DYzCRmeT.js";function ie({users:h,permissions:j,current_permissions:f}){const[t,g]=l.useState(null),[a,n]=l.useState([]),{setData:S,post:b,processing:c}=E({user_id:null,permissions:[]});l.useEffect(()=>{S({user_id:t,permissions:a})},[t,a]);const N=s=>{const r=s?parseInt(s):null;if(g(r),r){const i=f[r]||[];n(i.map(y=>y.permission_id))}else n([])},C=s=>{n(r=>r.includes(s)?r.filter(i=>i!==s):[...r,s])},v=s=>{s.preventDefault(),t&&b(route("admin.permissions.assign"),{preserveScroll:!0,onSuccess:()=>{o.success("Permissions attribuées avec succès")},onError:()=>{o.error("Une erreur est survenue lors de l'attribution des permissions")}})},P=[{title:"Accueil",href:route("dashboard")},{title:"Gestion des Permissions",href:route("admin.permissions.index")},{title:"Attribuer des Permissions",href:route("admin.permissions.assign")}];return e.jsxs(L,{breadcrumbs:P,children:[e.jsx(A,{title:"Gestion des Permissions"}),e.jsx("div",{className:"py-12 space-y-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8 space-y-6",children:[e.jsxs(m,{children:[e.jsx(d,{children:e.jsx(u,{children:"Sélectionner un Utilisateur"})}),e.jsx(p,{children:e.jsxs(B,{onValueChange:N,value:(t==null?void 0:t.toString())||"",required:!0,children:[e.jsx(k,{className:"w-full",children:e.jsx(D,{placeholder:"Sélectionner un utilisateur"})}),e.jsx(T,{children:h.map(s=>e.jsxs(U,{value:s.id.toString(),children:[s.name," ",e.jsx(z,{variant:"secondary",className:"ml-2",children:s.email})]},s.id))})]})})]}),t&&e.jsx("form",{onSubmit:v,children:e.jsxs(m,{className:"mt-6",children:[e.jsx(d,{children:e.jsx(u,{children:"Permissions Disponibles"})}),e.jsxs(p,{className:"space-y-6",children:[Object.entries(j).map(([s,r])=>e.jsxs("div",{className:"space-y-4",children:[e.jsx(x,{className:"text-lg capitalize",children:s}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:r.map(i=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(_,{id:`perm-${i.id}`,checked:a.includes(i.id),onCheckedChange:()=>C(i.id)}),e.jsxs(x,{htmlFor:`perm-${i.id}`,className:"space-y-1",children:[e.jsx("div",{className:"font-medium capitalize",children:i.action}),e.jsx("p",{className:"text-sm text-muted-foreground",children:i.description})]})]},i.id))})]},s)),e.jsx(w,{type:"submit",disabled:c||a.length===0,className:"w-full sm:w-auto",children:c?"Enregistrement...":"Enregistrer les Permissions"})]})]})})]})})]})}export{ie as default};
//# sourceMappingURL=Assign-nkTFnbMQ.js.map
