import{r as m,j as e,L as D,$ as u,S as N,t as T}from"./app-CfIQfryc.js";import{B as t}from"./button-By8FOct-.js";import{C as A,a as S,b as U,c as y}from"./card-DdvJbsWn.js";import{T as B,a as P,b as x,c as n,d as H,e as a}from"./table-BeH2ah0y.js";import{A as L,D as z}from"./app-layout-DBCqPTBR.js";import{D as E,a as G,b as O,c as k}from"./dialog-DJ_xRxTr.js";import{B as w}from"./badge-CEGVyFq6.js";import"./app-XAPMnnx3.js";import"./index-F55flZwV.js";import"./utils-jAU0Cazi.js";import"./createLucideIcon-DjaE45rK.js";import"./index-BSyT1Gdz.js";import"./index-B8Z1OlCE.js";import"./app-logo-icon-Cf6SMoi-.js";import"./car-front-B2ibBUtT.js";import"./package-CAWIZc5k.js";function se({permissions:l,userPermissions:o}){const[i,h]=m.useState(null),[p,d]=m.useState(!1),j=[{title:"Accueil",href:route("dashboard")},{title:"Gestion des Permissions",href:route("admin.permissions.index")}],c=s=>{const r=l.find(C=>C.id===s);return(r==null?void 0:r.users)||[]},f=s=>o?o.filter(r=>r.permission_id===s).map(r=>r.user).filter(Boolean):[],g=s=>{h(s),d(!0)},v=s=>{confirm("Êtes-vous sûr de vouloir supprimer cette permission ?")&&N.delete(route("admin.permissions.destroy",s),{preserveScroll:!0,onSuccess:()=>{T.success("Permission supprimée avec succès")},onError:()=>{alert("Une erreur est survenue lors de la suppression")}})},b=o?f:c;return e.jsxs(L,{breadcrumbs:j,children:[e.jsx(D,{title:"Gestion des Permissions"}),e.jsxs("div",{className:"p-6",children:[e.jsxs(A,{children:[e.jsx(S,{children:e.jsx(U,{children:"Gestion des Permissions"})}),e.jsxs(y,{children:[e.jsx("div",{className:"flex justify-end mb-4",children:e.jsx(t,{asChild:!0,children:e.jsx(u,{href:route("admin.permissions.create"),children:"Ajouter une Permission"})})}),e.jsxs(B,{children:[e.jsx(P,{children:e.jsxs(x,{children:[e.jsx(n,{children:"Nom"}),e.jsx(n,{children:"Description"}),e.jsx(n,{children:"Utilisateurs"}),e.jsx(n,{children:"Actions"})]})}),e.jsx(H,{children:l.map(s=>{const r=b(s.id);return e.jsxs(x,{children:[e.jsx(a,{className:"font-medium",children:s.name}),e.jsx(a,{children:s.description}),e.jsx(a,{children:r.length>0?e.jsxs(t,{variant:"ghost",size:"sm",onClick:()=>g(s),children:["Voir ",r.length," utilisateur(s)"]}):e.jsx("span",{className:"text-muted-foreground",children:"Aucun utilisateur"})}),e.jsxs(a,{className:"flex space-x-2",children:[e.jsx(t,{asChild:!0,variant:"outline",size:"sm",children:e.jsx(u,{href:route("admin.permissions.edit",s.ref),children:"Modifier"})}),e.jsx(t,{variant:"destructive",size:"sm",onClick:()=>v(s.id),children:"Supprimer"})]})]},s.id)})})]})]})]}),e.jsx(E,{open:p,onOpenChange:d,children:e.jsxs(G,{children:[e.jsxs(O,{children:[e.jsxs(k,{children:["Utilisateurs avec la permission: ",i==null?void 0:i.name]}),e.jsx(z,{children:"Liste des utilisateurs ayant cette permission"})]}),e.jsx("div",{className:"space-y-2",children:i&&c(i.id).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.email})]}),e.jsxs(w,{variant:"outline",children:["ID: ",s.id]})]},s.id))})]})})]})]})}export{se as default};
//# sourceMappingURL=Accueil-CkHmFn79.js.map
