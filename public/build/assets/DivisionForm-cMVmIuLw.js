import{m as F,j as e,t as d}from"./app-CfIQfryc.js";import{I as p}from"./input-3mQeuo9Z.js";import{L as l}from"./label-Bc_E8aZ_.js";import{S as P}from"./switch-CpclJW_L.js";import{S as m,a as i,b as h,c as u,d as x}from"./select-mimKbrnD.js";function A({division:r,types:j,parents:g,isEdit:y=!1}){var o;const{data:s,setData:a,post:f,put:S,errors:c}=F({nom:(r==null?void 0:r.nom)||"",type:(r==null?void 0:r.type)||"province",code:(r==null?void 0:r.code)||"",parent_id:(r==null?void 0:r.parent_id)||null,is_active:(r==null?void 0:r.is_active)??!0}),v=t=>({province:[],territoire:["province"],ville:["province","territoire"],commune:["ville"],quartier:["commune"]})[t]||[],n=g.filter(t=>v(s.type).includes(t.type)),N=s.type==="province"||n.length===0,_=()=>s.type==="province"?"Les provinces n'ont pas de parent":n.length===0?"Aucun parent disponible pour ce type":"Sélectionnez une division parente",C=t=>{t.preventDefault(),y&&r?S(route("divisions.update",r.id),{onSuccess:()=>d.success("Division mise à jour avec succès")}):f(route("division.store"),{onSuccess:()=>d.success("Division créée avec succès")})};return e.jsxs("form",{onSubmit:C,id:"division-form",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"nom",children:"Nom"}),e.jsx(p,{id:"nom",value:s.nom,onChange:t=>a("nom",t.target.value),placeholder:"Nom de la division",required:!0}),c.nom&&e.jsx("p",{className:"text-sm text-red-500",children:c.nom})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"type",children:"Type"}),e.jsxs(m,{value:s.type,onValueChange:t=>a("type",t),children:[e.jsx(i,{children:e.jsx(h,{placeholder:"Sélectionnez un type"})}),e.jsx(u,{children:j.map(t=>e.jsx(x,{value:t,children:t.charAt(0).toUpperCase()+t.slice(1)},t))})]}),c.type&&e.jsx("p",{className:"text-sm text-red-500",children:c.type})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"code",children:"Code"}),e.jsx(p,{id:"code",value:s.code,onChange:t=>a("code",t.target.value),placeholder:"Code unique (optionnel)"}),c.code&&e.jsx("p",{className:"text-sm text-red-500",children:c.code})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"parent_id",children:"Division parente"}),e.jsxs(m,{value:((o=s.parent_id)==null?void 0:o.toString())||"",onValueChange:t=>a("parent_id",t?parseInt(t):null),disabled:N,children:[e.jsx(i,{children:e.jsx(h,{placeholder:_()})}),e.jsx(u,{children:n.map(t=>e.jsxs(x,{value:t.id.toString(),children:[t.nom," (",t.type,")"]},t.id))})]}),c.parent_id&&e.jsx("p",{className:"text-sm text-red-500",children:c.parent_id})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-4",children:[e.jsx(P,{id:"is_active",checked:s.is_active,onCheckedChange:t=>a("is_active",t)}),e.jsx(l,{htmlFor:"is_active",children:"Actif"})]})]})}export{A as D};
//# sourceMappingURL=DivisionForm-cMVmIuLw.js.map
