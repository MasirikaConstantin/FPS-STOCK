import{K as T,j as e,S as g,L as R}from"./app-CfIQfryc.js";import{C as w,a as M,b as D,c as k}from"./card-DdvJbsWn.js";import{B as X}from"./button-By8FOct-.js";import{P as L}from"./plus-BoPM2Rc5.js";import{M as O}from"./minus-DDb4PPVZ.js";import{P as b}from"./package-CAWIZc5k.js";import{c as A}from"./createLucideIcon-DjaE45rK.js";import{F as H}from"./file-text-B5MOClBs.js";import{T as C,H as $,A as B,I as F}from"./app-layout-DBCqPTBR.js";import{B as q}from"./badge-CEGVyFq6.js";import{t as x,e as E,n as S,g as y,f as z,h as P,m as _,i as p}from"./en-US-DCG5IRVV.js";import{e as Y,d as K}from"./endOfMonth-BujD7vy8.js";import{A as G}from"./activity-BPIT_otn.js";import{f as U}from"./fr-CLKhQ7g2.js";import{C as Q}from"./circle-alert-lLNPZxqg.js";import"./app-XAPMnnx3.js";import"./utils-jAU0Cazi.js";import"./index-F55flZwV.js";import"./index-BSyT1Gdz.js";import"./index-B8Z1OlCE.js";import"./app-logo-icon-Cf6SMoi-.js";import"./car-front-B2ibBUtT.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],J=A("Car",V);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Z=A("CircleCheckBig",W);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],te=A("Search",ee);function v(n,a){const t=+x(n)-+x(a);return t<0?-1:t>0?1:t}function re(n){return E(n,Date.now())}function se(n){return a=>{const i=(n?Math[n]:Math.trunc)(a);return i===0?0:i}}function ne(n,a){return+x(n)-+x(a)}function ae(n,a){const t=x(n,a==null?void 0:a.in);return t.setHours(23,59,59,999),t}function ce(n,a){const t=x(n,a==null?void 0:a.in);return+ae(t,a)==+Y(t,a)}function ie(n,a,t){const[i,r,s]=S(t==null?void 0:t.in,n,n,a),l=v(r,s),c=Math.abs(K(r,s));if(c<1)return 0;r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-l*c);let u=v(r,s)===-l;ce(i)&&c===1&&v(i,s)===1&&(u=!1);const m=l*(c-+u);return m===0?0:m}function oe(n,a,t){const i=ne(n,a)/1e3;return se(t==null?void 0:t.roundingMethod)(i)}function le(n,a,t){const i=z(),r=(t==null?void 0:t.locale)??i.locale??P,s=2520,l=v(n,a);if(isNaN(l))throw new RangeError("Invalid time value");const c=Object.assign({},t,{addSuffix:t==null?void 0:t.addSuffix,comparison:l}),[u,m]=S(t==null?void 0:t.in,...l>0?[a,n]:[n,a]),f=oe(m,u),I=(y(m)-y(u))/1e3,o=Math.round((f-I)/60);let h;if(o<2)return t!=null&&t.includeSeconds?f<5?r.formatDistance("lessThanXSeconds",5,c):f<10?r.formatDistance("lessThanXSeconds",10,c):f<20?r.formatDistance("lessThanXSeconds",20,c):f<40?r.formatDistance("halfAMinute",0,c):f<60?r.formatDistance("lessThanXMinutes",1,c):r.formatDistance("xMinutes",1,c):o===0?r.formatDistance("lessThanXMinutes",1,c):r.formatDistance("xMinutes",o,c);if(o<45)return r.formatDistance("xMinutes",o,c);if(o<90)return r.formatDistance("aboutXHours",1,c);if(o<_){const d=Math.round(o/60);return r.formatDistance("aboutXHours",d,c)}else{if(o<s)return r.formatDistance("xDays",1,c);if(o<p){const d=Math.round(o/_);return r.formatDistance("xDays",d,c)}else if(o<p*2)return h=Math.round(o/p),r.formatDistance("aboutXMonths",h,c)}if(h=ie(m,u),h<12){const d=Math.round(o/p);return r.formatDistance("xMonths",d,c)}else{const d=h%12,N=Math.trunc(h/12);return d<3?r.formatDistance("aboutXYears",N,c):d<9?r.formatDistance("overXYears",N,c):r.formatDistance("almostXYears",N+1,c)}}function de(n,a){return le(n,re(n),a)}const ue=()=>{const{auth:n}=T().props,a=n.user.role,i=(r=>[{title:"Entrée de stock",description:"Enregistrer une livraison",icon:L,roles:["admin_central"],color:"bg-green-500/90 hover:bg-green-600 text-white",action:()=>g.visit("/stocks/create")},{title:"Sortie de stock",description:"Consommation/vente",roles:["admin_central","admin","medecin","pharmacien","magasinier"],icon:O,color:"bg-red-500/90 hover:bg-red-600 text-white",action:()=>g.visit("/stock/mouvements/")},{title:"Stock",roles:["admin_central","admin","medecin","pharmacien","magasinier"],description:"Compter les stocks",icon:b,color:"bg-blue-500/90 hover:bg-blue-600 text-white",action:()=>n.user.role==="admin_central"?g.visit("/stock/entree/activite"):g.visit("/stocks")},{title:"Rechercher",description:"Trouver un article",roles:["admin_central","admin","medecin","pharmacien","magasinier"],icon:te,color:"bg-slate-500/90 hover:bg-slate-600 text-white",action:()=>console.log("Rechercher")},{title:"Rapport",description:"Générer un rapport",roles:["admin_central","admin","medecin","pharmacien","magasinier"],icon:H,color:"bg-purple-500/90 hover:bg-purple-600 text-white",action:()=>console.log("Rapport")},{title:"Alertes",description:"Gérer les alertes",icon:C,roles:["admin_central","admin","medecin","pharmacien","magasinier"],color:"bg-orange-500/90 hover:bg-orange-600 text-white",action:()=>g.visit("/alerts/")}].filter(l=>{var c;return(c=l.roles)==null?void 0:c.includes(r)}))(a);return e.jsxs(w,{className:"border-border/50 shadow-sm",children:[e.jsx(M,{className:"pb-3",children:e.jsx(D,{className:"text-lg font-semibold text-foreground",children:"Actions rapides"})}),e.jsx(k,{className:"pt-0",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-3",children:i.map((r,s)=>{const l=r.icon;return e.jsx(X,{variant:"ghost",className:"h-auto p-4 flex flex-col items-start space-y-2 hover:shadow-md transition-all border border-border/30 hover:border-primary/30",onClick:r.action,children:e.jsxs("div",{className:"flex items-center space-x-3 w-full",children:[e.jsx("div",{className:`w-10 h-10 ${r.color} rounded-lg flex items-center justify-center flex-shrink-0`,children:e.jsx(l,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 text-left space-y-0.5",children:[e.jsx("div",{className:"font-medium text-foreground",children:r.title}),e.jsx("div",{className:"text-xs text-muted-foreground",children:r.description})]})]})},s)})})})]})},j=({title:n,value:a,icon:t,variant:i="default"})=>e.jsxs(w,{className:"w-full",color:i,children:[e.jsxs(M,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(t,{className:"h-8 w-8 text-muted-foreground"}),e.jsx(D,{className:"text-sm font-medium",children:n})]}),e.jsx(k,{children:e.jsx("div",{className:"text-2xl font-bold",children:a.toLocaleString("fr-FR")})})]}),me=({activities:n})=>{const a=s=>{switch(s){case"transfert":return e.jsx($,{className:"h-4 w-4"});case"stock":return e.jsx(b,{className:"h-4 w-4"});case"alerte":return e.jsx(C,{className:"h-4 w-4"});case"reception":return e.jsx(Z,{className:"h-4 w-4"});case"entre_stock":return e.jsx(b,{className:"h-4 w-4"});default:return e.jsx(G,{className:"h-4 w-4"})}},t=s=>{switch(s){case"transfert":return"default";case"stock":return"default";case"alerte":return"destructive";case"reception":return"default";case"entre_stock":return"secondary";default:return"default"}},i=s=>{switch(s){case"approuve":return"text-green-500";case"en_transit":return"text-blue-500";case"livre":return"text-purple-500";case"annule":return"text-red-500";case"en_attente":return"text-yellow-500";case"entre_stock":return"text-primary-500";default:return"text-gray-500"}},r=n.map(s=>({...s,uniqueKey:s.id||`${s.type}-${s.createdAt}-${Math.random().toString(36).substr(2,9)}`}));return e.jsxs(w,{className:"col-span-12 lg:col-span-6",children:[e.jsx(M,{children:e.jsx(D,{children:"Activités Récentes"})}),e.jsx(k,{children:e.jsx("div",{className:"space-y-8",children:r.map(s=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-muted",children:a(s.type)}),e.jsxs("div",{className:"ml-4 space-y-1",children:[e.jsxs("p",{className:"text-sm font-medium leading-none",children:[s.title,s.hospital&&e.jsxs("span",{className:"font-bold",children:[" ",s.hospital]})]}),s.product&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.product}),s.status&&e.jsx("span",{className:`text-xs ${i(s.status)}`,children:s.status.replace("_"," ")})]}),e.jsxs("div",{className:"ml-auto text-xs text-muted-foreground",children:[de(new Date(s.createdAt),{addSuffix:!0,locale:U}),e.jsx("br",{}),e.jsx(q,{variant:t(s.type),children:s.title.charAt(0).toUpperCase()+s.title.slice(1)})]})]},s.uniqueKey))})})]})},fe=[{title:"Dashboard",href:"/dashboard"}];function Oe({auth:n,stocks_total:a,hopitaux_connectes:t,alertes_avertissement_expiration:i,transferts_en_attente:r,recentActivities:s}){return e.jsxs(B,{breadcrumbs:fe,children:[e.jsx(R,{title:"Dashboard"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[e.jsx("div",{className:"grid auto-rows-min gap-4 md:grid-cols-4",children:n.user.role==="admin_central"&&e.jsxs(e.Fragment,{children:[e.jsx(j,{title:"Stocks",value:a,icon:b,variant:"destructive"}),e.jsx(j,{title:"Hopitaux Connectés",value:t,icon:F,variant:"destructive"}),e.jsx(j,{title:"Alertes",value:i,icon:Q,variant:"destructive"}),e.jsx(j,{title:"Transferts En Attente",value:r,icon:J,variant:"destructive"})]})}),e.jsx("div",{className:"relative min-h-[100vh] overflow-hidden rounded-xl border border-sidebar-border/70 md:min-h-min dark:border-sidebar-border",children:e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row",children:[e.jsx("div",{className:"flex-1",children:e.jsx(me,{activities:s})}),e.jsx("div",{className:"flex-1",children:e.jsx(ue,{})})]})})})]})]})}export{Oe as default};
//# sourceMappingURL=dashboard-DFMxVsMk.js.map
