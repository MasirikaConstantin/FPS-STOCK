import{m as $,j as e,L as w,$ as K,t as x}from"./app-CSjzvEdl.js";import{A as E}from"./app-layout-BI0sLpWU.js";import{B as n}from"./button-DKtJZtgI.js";import{I as h}from"./input-BSc8baJv.js";import{L as l}from"./label-Lx0dL3y0.js";import{S as j,a as v,b as g,c as f,d as _}from"./select-CWgXAWFB.js";import{T as L}from"./textarea-C5-KoVnw.js";import{S as D}from"./switch-BaLTQE1w.js";import{C as F,a as I,b as T,c as M}from"./card-CbEGrNjZ.js";import"./app-DCR4OZ8t.js";import"./index-CgyB2gb4.js";import"./utils-jAU0Cazi.js";import"./createLucideIcon-Bm1i9eVH.js";import"./index-DtfqDP5q.js";import"./index-DtyIfu9z.js";import"./app-logo-icon-sN9k3MyY.js";import"./car-front-BKurbF1U.js";import"./package-C3gqZCnc.js";import"./index-BHeidSKY.js";import"./check-BP1rGdyQ.js";function te({kit:r,categories:N,produits:y}){var p;const{data:c,setData:d,put:C,processing:m,errors:t}=$({nom:r==null?void 0:r.nom,description:r.description||"",categorie_id:r.categorie_id.toString(),is_active:r.is_active,articles:((p=r.articles)==null?void 0:p.map(s=>({medical_produit_id:s.medical_produit_id.toString(),quantite:s.quantite,ref:s.ref})))||[]}),S=[{title:"Gestion des Kits",href:"/kits"},{title:`Modifier ${r==null?void 0:r.nom}`,href:`/kits/${r==null?void 0:r.ref}/edit`}],b=s=>{s.preventDefault(),C(route("kits.update",r==null?void 0:r.ref),{onSuccess:()=>{x.success("Kit mis à jour avec succès")},onError:()=>{x.error("Une erreur est survenue lors de la mise à jour")}})},q=()=>{d("articles",[...c.articles,{medical_produit_id:"",quantite:1}])},A=s=>{const i=[...c.articles];i.splice(s,1),d("articles",i)},u=(s,i,a)=>{const o=[...c.articles];o[s]={...o[s],[i]:a},d("articles",o)};return e.jsxs(E,{breadcrumbs:S,children:[e.jsx(w,{title:`Modifier ${r.nom}`}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs(F,{children:[e.jsx(I,{children:e.jsxs(T,{children:["Modification du Kit ",r==null?void 0:r.nom]})}),e.jsx(M,{children:e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:b,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"nom",children:"Nom du Kit*"}),e.jsx(h,{id:"nom",value:c.nom,onChange:s=>d("nom",s.target.value),placeholder:"Nom du kit",required:!0}),t.nom&&e.jsx("p",{className:"text-sm text-red-500",children:t.nom})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"categorie_id",children:"Catégorie*"}),e.jsxs(j,{value:c.categorie_id,onValueChange:s=>d("categorie_id",s),required:!0,children:[e.jsx(v,{children:e.jsx(g,{placeholder:"Sélectionner une catégorie"})}),e.jsx(f,{children:N.map(s=>e.jsx(_,{value:s.id.toString(),children:s.nom},s.id))})]}),t.categorie_id&&e.jsx("p",{className:"text-sm text-red-500",children:t.categorie_id})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(D,{id:"is_active",checked:c.is_active,onCheckedChange:s=>d("is_active",s)}),e.jsx(l,{htmlFor:"is_active",children:"Kit actif"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"description",children:"Description"}),e.jsx(L,{id:"description",value:c.description,onChange:s=>d("description",s.target.value),placeholder:"Description du kit (optionnel)",rows:3}),t.description&&e.jsx("p",{className:"text-sm text-red-500",children:t.description})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(l,{children:"Articles du Kit"}),e.jsx(n,{type:"button",variant:"outline",size:"sm",onClick:q,children:"Ajouter un article"})]}),c.articles.length>0?e.jsx("div",{className:"space-y-4 border px-4 py-4 rounded-2xl",children:c.articles.map((s,i)=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Produit*"}),e.jsxs(j,{value:s.medical_produit_id,onValueChange:a=>u(i,"medical_produit_id",a),required:!0,children:[e.jsx(v,{children:e.jsx(g,{placeholder:"Sélectionner un produit"})}),e.jsx(f,{children:y.map(a=>e.jsxs(_,{value:a.id.toString(),children:[a.name," (",a.unite,")"]},a.id))})]}),t[`articles.${i}.medical_produit_id`]&&e.jsx("p",{className:"text-sm text-red-500",children:t[`articles.${i}.medical_produit_id`]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Quantité*"}),e.jsx(h,{type:"number",min:"1",value:s.quantite,onChange:a=>u(i,"quantite",parseInt(a.target.value)),required:!0}),t[`articles.${i}.quantite`]&&e.jsx("p",{className:"text-sm text-red-500",children:t[`articles.${i}.quantite`]})]}),e.jsx("div",{children:e.jsx(n,{type:"button",variant:"destructive",size:"sm",onClick:()=>A(i),children:"Supprimer"})})]},i))}):e.jsx("div",{className:"text-center text-gray-500 py-4",children:"Aucun article ajouté au kit"})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(n,{variant:"outline",asChild:!0,children:e.jsx(K,{href:route("kits.index"),children:"Annuler"})}),e.jsx(n,{type:"submit",disabled:m,children:m?"Enregistrement...":"Enregistrer"})]})]})})})]})})})})]})}export{te as default};
//# sourceMappingURL=Edit-CKHdAoq9.js.map
