import{r as x,j as e,L as S,$ as a,S as k,t as p}from"./app-CfIQfryc.js";import{T as M,A as E,a as I,b as O,c as B,d as _,e as F,f as H,g as L}from"./alert-dialog-B252CZ34.js";import{B as G}from"./badge-CEGVyFq6.js";import{B as o}from"./button-By8FOct-.js";import{C as R,a as U,b as $,c as V}from"./card-DdvJbsWn.js";import{A as q,a as z,b as J,c as K,d as h}from"./app-layout-DBCqPTBR.js";import{T as Q,a as W,b as j,c as t,d as X,e as l}from"./table-BeH2ah0y.js";import{E as Y}from"./ellipsis-4FxrYdR1.js";import{E as Z}from"./eye-skH557t9.js";import{P as ee}from"./pencil-BG30dTx7.js";import"./app-XAPMnnx3.js";import"./createLucideIcon-DjaE45rK.js";import"./index-F55flZwV.js";import"./utils-jAU0Cazi.js";import"./index-BSyT1Gdz.js";import"./index-B8Z1OlCE.js";import"./app-logo-icon-Cf6SMoi-.js";import"./car-front-B2ibBUtT.js";import"./package-CAWIZc5k.js";function Ne({produits:c,categories:f,fournisseurs:g,auth:d}){const[C,m]=x.useState(!1),[i,N]=x.useState(null),[D,n]=x.useState(null),w=[{title:"Produits Médicaux",href:"/medical-produits"}],A=s=>{N(s),m(!0),n(null)},b=()=>{i&&k.delete(route("medical-produits.destroy",i.ref),{preserveScroll:!0,onSuccess:()=>{p.success("Produit supprimé avec succès"),m(!1)},onError:()=>{p.error("Une erreur est survenue lors de la suppression")},onFinish:()=>{n(null)}})},v=s=>{var r;return((r=f.find(u=>u.id===s))==null?void 0:r.nom)||"Inconnue"},y=s=>{var r;return s?((r=g.find(u=>u.id===s))==null?void 0:r.nom)||"Inconnu":"-"},T=d.user.permissions.some(s=>s.action==="create"&&s.module==="medical-produits"),P=d.user.role==="admin_central";return d.user.role,e.jsxs(q,{breadcrumbs:w,children:[e.jsx(S,{title:"Gestion des Produits Médicaux"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs(R,{children:[e.jsxs(U,{className:"flex flex-row items-center justify-between space-y-0",children:[e.jsx($,{className:"text-2xl font-bold",children:"Gestion des Produits Médicaux"}),T&&e.jsx(o,{className:"mb-3",children:e.jsx(a,{href:route("medical-produits.create"),children:"Ajouter un Produit"})}),P&&e.jsx(o,{className:"mb-3",children:e.jsx(a,{href:route("medical-produits.create"),children:"Ajouter un Produit"})})]}),e.jsx(V,{children:e.jsx("div",{className:"p-6",children:e.jsxs(Q,{className:"dark:text-gray-400cell w-full text-left text-sm text-gray-500 rtl:text-right",children:[e.jsx(W,{children:e.jsxs(j,{children:[e.jsx(t,{children:"Nom"}),e.jsx(t,{children:"Catégorie"}),e.jsx(t,{children:"Unité"}),e.jsx(t,{children:"Fournisseur"}),e.jsx(t,{children:"Statut"}),e.jsx(t,{children:"Actions"})]})}),e.jsx(X,{children:c&&c.length>0?c.map(s=>e.jsxs(j,{children:[e.jsx(l,{className:"font-medium text-black dark:text-white",children:s.name.slice(0,25)}),e.jsxs(l,{children:[v(s.categorie_id).slice(0,25),"..."]}),e.jsx(l,{children:s.unite}),e.jsx(l,{children:y(s.fournisseur_id)||"-"}),e.jsx(l,{children:e.jsxs(G,{variant:s.seuil_min>0?"default":"secondary",children:[s.seuil_min," min"]})}),e.jsx(l,{children:e.jsxs(z,{open:D===s.ref,onOpenChange:r=>{n(r?s.ref:null)},children:[e.jsx(J,{asChild:!0,children:e.jsx(o,{variant:"ghost",className:"h-8 w-8 p-0",onClick:r=>r.stopPropagation(),children:e.jsx(Y,{className:"h-4 w-4"})})}),e.jsxs(K,{align:"end",onInteractOutside:()=>n(null),children:[e.jsx(h,{asChild:!0,children:e.jsxs(a,{href:route("medical-produits.show",s.ref),className:"flex items-center",onClick:()=>n(null),children:[e.jsx(Z,{className:"mr-2 h-4 w-4"}),"Voir"]})}),e.jsx(h,{asChild:!0,children:e.jsxs(a,{href:route("medical-produits.edit",s.ref),className:"flex items-center",onClick:()=>n(null),children:[e.jsx(ee,{className:"mr-2 h-4 w-4"}),"Modifier"]})}),e.jsxs(h,{className:"text-red-600 focus:bg-red-50 focus:text-red-600",onClick:r=>{r.preventDefault(),A(s),n(null)},children:[e.jsx(M,{className:"mr-2 h-4 w-4"}),"Supprimer"]})]})]})})]},s.id)):e.jsx(j,{children:e.jsxs(l,{colSpan:11,className:"py-4 text-center",children:[e.jsx("div",{className:"text-gray-500",children:"Aucun produit médical trouvé."}),e.jsx(o,{asChild:!0,variant:"link",className:"mt-2",children:e.jsx(a,{href:route("medical-produits.create"),children:"Ajouter un produit"})})]})})})]})})})]})})})}),e.jsx(E,{open:C,onOpenChange:m,children:e.jsxs(I,{children:[e.jsxs(O,{children:[e.jsx(B,{children:"Êtes-vous sûr ?"}),e.jsxs(_,{children:['Cette action supprimera définitivement le produit "',i==null?void 0:i.name,'" et ne pourra pas être annulée.']})]}),e.jsxs(F,{children:[e.jsx(H,{children:"Annuler"}),e.jsx(L,{onClick:b,children:"Supprimer"})]})]})})]})}export{Ne as default};
//# sourceMappingURL=Index-Cvw906QM.js.map
