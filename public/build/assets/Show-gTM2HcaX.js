import{j as e,L as H,S as a}from"./app-CSjzvEdl.js";import{B as t}from"./button-DKtJZtgI.js";import{B as n}from"./badge-BcNWtNC7.js";import{T as P,a as q,b as g,c as i,d as R,e as o}from"./table-Cjd2bJWp.js";import{C as d,a as c,b as m,c as p}from"./card-CbEGrNjZ.js";import{A as E}from"./app-layout-BI0sLpWU.js";import"./app-DCR4OZ8t.js";import"./index-CgyB2gb4.js";import"./utils-jAU0Cazi.js";import"./createLucideIcon-Bm1i9eVH.js";import"./index-DtfqDP5q.js";import"./index-DtyIfu9z.js";import"./app-logo-icon-sN9k3MyY.js";import"./car-front-BKurbF1U.js";import"./package-C3gqZCnc.js";const C={en_attente:"bg-amber-100 text-amber-800",preleve:"bg-blue-100 text-blue-800",livre:"bg-green-100 text-green-800",annule:"bg-red-100 text-red-800"};function ee({auth:r,transfert:s}){var x,u,h,j,v,f,N,_;const T=s.status==="en_attente",A=s.status==="approuve",S=["en_attente","approuve"].includes(s.status),y=[{title:"Gestion des Transferts",href:"/transferts"},{title:`Transfert #${s.id}`,href:`/transferts/${s.ref}`}],D=()=>{a.post(route("approve-transfert.approve",s.ref))},k=()=>{a.post(route("complete.transferts.complete",s.ref))},w=()=>{a.post(route("cancel.transferts.cancel",s.ref))},L=((x=r.profil)==null?void 0:x.profil)&&((u=r.profil)==null?void 0:u.profil.hopital_id)===s.to_hospital_id&&(r.user.role==="admin"||r.user.role==="admin_central"),B=((h=r.profil)==null?void 0:h.profil)&&((j=r.profil)==null?void 0:j.profil.hopital_id)===s.to_hospital_id&&r.user.role==="admin",$=r.profil&&r.profil.hopital_id===s.to_hospital_id||r.user.role==="admin"||r.user.role==="admin_central";return e.jsxs(E,{breadcrumbs:y,children:[e.jsx(H,{title:`Détails du Transfert ${s.ref}`}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h1",{className:"text-2xl font-bold",children:["Transfert #",s.id]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{className:C[s.status],children:s.status}),e.jsxs(n,{variant:"outline",children:["Priorité: ",s.priorite]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[T&&L&&e.jsx(t,{onClick:D,children:"Approuver"}),A&&B&&e.jsx(t,{variant:"secondary",onClick:k,children:"Marquer comme Livré"}),S&&$&&e.jsx(t,{variant:"destructive",onClick:w,children:"Annuler"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(d,{children:[e.jsx(c,{children:e.jsx(m,{children:"Informations du Transfert"})}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Par :"}),e.jsx("p",{className:"font-medium",children:(v=s.created_by)!=null&&v.name?s.created_by.name:"Nul"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Destination"}),e.jsx("p",{className:"font-medium",children:s.to_central?"Stock Central":(f=s.to_hospital)==null?void 0:f.nom})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Demandeur"}),e.jsx("p",{className:"font-medium",children:(N=s.demandeur)==null?void 0:N.name})]}),s.approbateur&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Approbateur"}),e.jsx("p",{className:"font-medium",children:(_=s.approbateur)==null?void 0:_.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Date de création"}),e.jsx("p",{className:"font-medium",children:new Date(s.created_at).toLocaleString()})]}),s.approuve_le&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Date d'approbation"}),e.jsx("p",{className:"font-medium",children:new Date(s.approuve_le).toLocaleString()})]}),s.livre_le&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Date de livraison"}),e.jsx("p",{className:"font-medium",children:new Date(s.livre_le).toLocaleString()})]})]})]}),e.jsxs(d,{children:[e.jsx(c,{children:e.jsx(m,{children:"Notes"})}),e.jsx(p,{children:e.jsx("p",{className:"text-muted-foreground whitespace-pre-line",children:s.notes||"Aucune note disponible"})})]})]}),e.jsxs(d,{children:[e.jsx(c,{children:e.jsx(m,{children:"Articles Transférés"})}),e.jsx(p,{children:e.jsxs(P,{children:[e.jsx(q,{children:e.jsxs(g,{children:[e.jsx(i,{children:"Produit"}),e.jsx(i,{children:"Quantité"}),e.jsx(i,{children:"Source"}),e.jsx(i,{children:"Statut"})]})}),e.jsx(R,{children:s.items.map(l=>{var b;return e.jsxs(g,{children:[e.jsx(o,{className:"font-medium",children:l.medical_produit.name}),e.jsx(o,{children:l.quantite}),e.jsx(o,{children:l.from_central?"Stock Central":l.stock_source?`${(b=l.stock_source.hopital)==null?void 0:b.nom} (Lot: ${l.stock_source.numero_lot})`:"N/A"}),e.jsx(o,{children:e.jsx(n,{className:C[l.status],children:l.status})})]},l.id)})})]})})]})]})})]})}export{ee as default};
//# sourceMappingURL=Show-gTM2HcaX.js.map
