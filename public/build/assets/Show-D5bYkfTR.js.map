{"version":3,"file":"Show-D5bYkfTR.js","sources":["../../../resources/js/pages/Alerts/Show.tsx"],"sourcesContent":["import { Head, Link, router } from '@inertiajs/react';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Card, CardHeader, CardTitle, CardContent } from '@/components/ui/card';\nimport AppLayout from '@/layouts/app-layout';\nimport { BreadcrumbItem } from '@/types';\nimport { AlertTriangle, Bell, Check, Clock, CircleAlert, Info } from 'lucide-react';\nimport { toast } from 'sonner';\nimport { useState } from 'react';\n\nconst typeIcons = {\n  stock_faible: <AlertTriangle className=\"h-5 w-5\" />,\n  avertissement_expiration: <Clock className=\"h-5 w-5\" />,\n  expire: <CircleAlert className=\"h-5 w-5\" />,\n  demande_transfert: <Bell className=\"h-5 w-5\" />,\n  systeme: <Info className=\"h-5 w-5\" />,\n};\n\nconst typeColors = {\n  stock_faible: 'bg-amber-100 text-amber-800',\n  avertissement_expiration: 'bg-blue-100 text-blue-800',\n  expire: 'bg-red-100 text-red-800',\n  demande_transfert: 'bg-purple-100 text-purple-800',\n  systeme: 'bg-gray-100 text-gray-800',\n};\n\nconst priorityColors = {\n  faible: 'bg-gray-100 text-gray-800',\n  moyen: 'bg-blue-100 text-blue-800',\n  eleve: 'bg-amber-100 text-amber-800',\n  critique: 'bg-red-100 text-red-800',\n};\n\nexport default function Show({ alert, types, priorities, auth }: any) {\n    const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\n\n  const breadcrumbs: BreadcrumbItem[] = [\n    {\n      title: 'Gestion des Alertes',\n      href: '/alerts',\n    },\n    {\n      title: `Alerte #${alert.id}`,\n      href: `/alerts/${alert.ref}`,\n    },\n  ];\nconst handleResolve = () => {\n    router.post(\n      route('alerts.resolve', alert.ref),\n      { preserveScroll: true },\n      {\n        onSuccess: () => {\n          toast.success('Alerte marquée comme résolue avec succès.');\n        },\n      }\n    );\n}\n\n\nconst confirmDelete = () => {\n    router.delete(route('alerts.destroy', alert.ref), {\n        preserveScroll: true,\n        onSuccess: () => {\n            toast.success('Alerte supprimée avec succès');\n            setDeleteDialogOpen(false);\n        },\n        onError: () => {\n            toast.error('Une erreur est survenue lors de la suppression');\n        },\n        onFinish: () => {},\n    });\n};\n  return (\n    <AppLayout breadcrumbs={breadcrumbs}>\n      <Head title={`Détails de l'Alerte ${alert.ref}`} />\n\n      <div className=\"py-12\">\n        <div className=\"mx-auto max-w-7xl sm:px-6 lg:px-8 space-y-6\">\n          <div className=\"flex justify-between items-center\">\n            <h1 className=\"text-2xl font-bold\">Alerte #{alert.id}</h1>\n            <div className=\"flex gap-2\">\n              <Badge className={typeColors[alert.type]}>\n                {types[alert.type]}\n              </Badge>\n              <Badge className={priorityColors[alert.priorite]}>\n                {priorities[alert.priorite]}\n              </Badge>\n              {alert.is_resolved ? (\n                <Badge className=\"bg-green-100 text-green-800\">\n                  <Check className=\"h-4 w-4 mr-1\" /> Résolue\n                </Badge>\n              ) : (\n                <Badge variant=\"destructive\">En attente</Badge>\n              )}\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Détails de l'Alerte</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"flex items-center gap-4\">\n                  <div className={`p-3 rounded-full ${typeColors[alert.type]}`}>\n                    {typeIcons[alert.type]}\n                  </div>\n                  <div>\n                    <h3 className=\"font-medium\">{alert.titre}</h3>\n                    <p className=\"text-sm text-muted-foreground\">\n                      Créée le {new Date(alert.created_at).toLocaleString()}\n                    </p>\n                  </div>\n                </div>\n\n                <div className=\"space-y-2\">\n                  <p className=\"text-sm text-muted-foreground\">Message</p>\n                  <p className=\"whitespace-pre-line\">{alert.message}</p>\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>Informations supplémentaires</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">Hôpital</p>\n                  <p>{alert.hopital.nom}</p>\n                </div>\n\n                {alert.medical_produit && (\n                  <div>\n                    <p className=\"text-sm text-muted-foreground\">Produit Médical</p>\n                    <p>{alert.medical_produit.name}</p>\n                  </div>\n                )}\n\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">Créée par</p>\n                  <p>{alert.user.name}</p>\n                </div>\n\n                {alert.is_resolved && (\n                  <>\n                    <div>\n                      <p className=\"text-sm text-muted-foreground\">Résolue par</p>\n                      <p>{alert.resolved_by.name}</p>\n                    </div>\n                    <div>\n                      <p className=\"text-sm text-muted-foreground\">Date de résolution</p>\n                      <p>{new Date(alert.resolved_at).toLocaleString()}</p>\n                    </div>\n                  </>\n                )}\n              </CardContent>\n            </Card>\n          </div>\n\n          <div className=\"flex gap-2\">\n            <Button variant=\"outline\" asChild>\n              <Link href={route('alerts.index')}>Retour à la liste</Link>\n            </Button>\n            {!alert.is_resolved && (\n<>\n\n            <Button asChild>\n              <Link href={route('alerts.edit', alert.ref)}>Modifier</Link>\n            </Button>\n              <Button variant=\"secondary\" onClick={handleResolve}>\n                Marquer comme résolue\n              </Button>\n              {\n                (alert.user_id == auth.user.id) && (\n                  <Button variant=\"destructive\" onClick={confirmDelete}>\n                    Annuler le transfert\n                  </Button>\n                )\n              }\n              </>\n            )}\n          </div>\n        </div>\n      </div>\n    </AppLayout>\n  );\n}"],"names":["typeIcons","jsx","AlertTriangle","Clock","CircleAlert","Bell","Info","typeColors","priorityColors","Show","alert","types","priorities","auth","deleteDialogOpen","setDeleteDialogOpen","useState","breadcrumbs","handleResolve","router","toast","confirmDelete","jsxs","AppLayout","Head","Badge","Check","Card","CardHeader","CardTitle","CardContent","Fragment","Button","Link"],"mappings":"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"}