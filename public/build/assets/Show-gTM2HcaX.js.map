{"version":3,"file":"Show-gTM2HcaX.js","sources":["../../../resources/js/pages/Transferts/Show.tsx"],"sourcesContent":["import { Head } from '@inertiajs/react';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport AppLayout from '@/layouts/app-layout';\nimport { Auth, BreadcrumbItem } from '@/types';\nimport { router } from '@inertiajs/react';\n\nconst statusColors = {\n  en_attente: 'bg-amber-100 text-amber-800',\n  preleve: 'bg-blue-100 text-blue-800',\n  livre: 'bg-green-100 text-green-800',\n  annule: 'bg-red-100 text-red-800',\n};\n\nexport default function Show({ auth, transfert }: { auth: Auth; transfert: any }) {\n  const canApprove = transfert.status === 'en_attente';\n  const canComplete = transfert.status === 'approuve';\n  const canCancel = ['en_attente', 'approuve'].includes(transfert.status);\n  const breadcrumbs: BreadcrumbItem[] = [\n    {\n      title: 'Gestion des Transferts',\n      href: '/transferts',\n    },\n    {\n      title: `Transfert #${transfert.id}`,\n      href: `/transferts/${transfert.ref}`,\n    },\n  ];\n\nconst handleApprove = () => {\n    router.post(route('approve-transfert.approve', transfert.ref));\n};\n\nconst handleComplete = () => {\n    router.post(route('complete.transferts.complete', transfert.ref));\n};\n\nconst handleCancel = () => {\n    router.post(route('cancel.transferts.cancel', transfert.ref));\n};\n\n  const peutApprouver = auth.profil?.profil && auth.profil?.profil.hopital_id === transfert.to_hospital_id && (auth.user.role === 'admin' || auth.user.role === 'admin_central');\n  const peutCompleter = auth.profil?.profil && auth.profil?.profil.hopital_id === transfert.to_hospital_id && auth.user.role === 'admin';\n  const peutAnnuler = auth.profil && auth.profil.hopital_id === transfert.to_hospital_id  || (auth.user.role === 'admin' || auth.user.role === 'admin_central');\n\n  return (\n    <AppLayout breadcrumbs={breadcrumbs}>\n      <Head title={`Détails du Transfert ${transfert.ref}`} />\n\n      <div className=\"py-12\">\n        <div className=\"mx-auto max-w-7xl sm:px-6 lg:px-8 space-y-6\">\n          <div className=\"flex justify-between items-center\">\n            <h1 className=\"text-2xl font-bold\">Transfert #{transfert.id}</h1>\n            <div className=\"flex gap-2\">\n              <Badge className={statusColors[transfert.status]}>\n                {transfert.status}\n              </Badge>\n              <Badge variant=\"outline\">\n                Priorité: {transfert.priorite}\n              </Badge>\n            </div>\n          </div>\n\n          <div className=\"flex gap-2\">\n            {canApprove && peutApprouver && (\n              <Button onClick={handleApprove}>\n                Approuver\n              </Button>\n            )}\n            {canComplete &&  peutCompleter &&(\n              <Button variant=\"secondary\" onClick={handleComplete}>\n                Marquer comme Livré\n              </Button>\n            )}\n            {canCancel && peutAnnuler&& (\n                <Button variant=\"destructive\" onClick={handleCancel}>\n                    Annuler\n                </Button>\n            )}\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Informations du Transfert</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">Par :</p>\n\n                  <p className=\"font-medium\">{transfert.created_by?.name ? transfert.created_by.name : \"Nul\"}</p>\n\n                </div>\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">Destination</p>\n                  <p className=\"font-medium\">{transfert.to_central ? 'Stock Central' : transfert.to_hospital?.nom}</p>\n                </div>\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">Demandeur</p>\n                  <p className=\"font-medium\">{transfert.demandeur?.name}</p>\n                </div>\n                {transfert.approbateur && (\n                  <div>\n                    <p className=\"text-sm text-muted-foreground\">Approbateur</p>\n                    <p className=\"font-medium\">{transfert.approbateur?.name}</p>\n                  </div>\n                )}\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">Date de création</p>\n                  <p className=\"font-medium\">{new Date(transfert.created_at).toLocaleString()}</p>\n                </div>\n                {transfert.approuve_le && (\n                  <div>\n                    <p className=\"text-sm text-muted-foreground\">Date d'approbation</p>\n                    <p className=\"font-medium\">{new Date(transfert.approuve_le).toLocaleString()}</p>\n                  </div>\n                )}\n                {transfert.livre_le && (\n                  <div>\n                    <p className=\"text-sm text-muted-foreground\">Date de livraison</p>\n                    <p className=\"font-medium\">{new Date(transfert.livre_le).toLocaleString()}</p>\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>Notes</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <p className=\"text-muted-foreground whitespace-pre-line\">\n                  {transfert.notes || 'Aucune note disponible'}\n                </p>\n              </CardContent>\n            </Card>\n          </div>\n\n          <Card>\n            <CardHeader>\n              <CardTitle>Articles Transférés</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <Table>\n                <TableHeader>\n                  <TableRow>\n                    <TableHead>Produit</TableHead>\n                    <TableHead>Quantité</TableHead>\n                    <TableHead>Source</TableHead>\n                    <TableHead>Statut</TableHead>\n                  </TableRow>\n                </TableHeader>\n                <TableBody>\n                  {transfert.items.map((item: any) => (\n                    <TableRow key={item.id}>\n                      <TableCell className=\"font-medium\">{item.medical_produit.name}</TableCell>\n                      <TableCell>{item.quantite}</TableCell>\n                      <TableCell>\n                        {item.from_central \n                          ? 'Stock Central' \n                          : item.stock_source \n                            ? `${item.stock_source.hopital?.nom} (Lot: ${item.stock_source.numero_lot})` \n                            : 'N/A'}\n                      </TableCell>\n                      <TableCell>\n                        <Badge className={statusColors[item.status]}>\n                          {item.status}\n                        </Badge>\n                      </TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    </AppLayout>\n  );\n}"],"names":["statusColors","Show","auth","transfert","canApprove","canComplete","canCancel","breadcrumbs","handleApprove","router","handleComplete","handleCancel","peutApprouver","_a","_b","peutCompleter","_c","_d","peutAnnuler","jsxs","AppLayout","jsx","Head","Badge","Button","Card","CardHeader","CardTitle","CardContent","_e","_f","_g","_h","Table","TableHeader","TableRow","TableHead","TableBody","item","TableCell"],"mappings":"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"}