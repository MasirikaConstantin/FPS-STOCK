import{m as P,j as e,L as q,$ as F,t as x}from"./app-CSjzvEdl.js";import{A as E}from"./app-layout-BI0sLpWU.js";import{B as o}from"./button-DKtJZtgI.js";import{I as u}from"./input-BSc8baJv.js";import{L as n}from"./label-Lx0dL3y0.js";import{S as p,a as h,b as j,c as _,d as l}from"./select-CWgXAWFB.js";import{P as v,a as f,b as g,C as N}from"./popover-BpsWF2yf.js";import{c as y}from"./utils-jAU0Cazi.js";import{C as M,a as H,b as L,c as $}from"./card-CbEGrNjZ.js";import{C}from"./calendar-Bu0MZIAk.js";import{f as c}from"./format-DoAzcPNu.js";import"./app-DCR4OZ8t.js";import"./index-CgyB2gb4.js";import"./createLucideIcon-Bm1i9eVH.js";import"./index-DtfqDP5q.js";import"./index-DtyIfu9z.js";import"./app-logo-icon-sN9k3MyY.js";import"./car-front-BKurbF1U.js";import"./package-C3gqZCnc.js";import"./index-BHeidSKY.js";import"./check-BP1rGdyQ.js";import"./en-US-DCG5IRVV.js";import"./endOfMonth-BujD7vy8.js";import"./chevron-left-zVSaV4Kd.js";function ne({stock:a,produits:S,hopitals:I}){const{data:r,setData:d,put:b,processing:m,errors:i}=P({medical_produit_id:a.medical_produit_id.toString(),quantite:a.quantite,numero_lot:a.numero_lot||"",date_expiration:a.date_expiration?new Date(a.date_expiration):null,prix_unitaire:a.prix_unitaire,received_date:new Date(a.received_date),status:a.status}),w=[{title:"Gestion des Stocks",href:"/stocks"},{title:`Modifier l'entrée ${a.id}`,href:`/stocks/${a.ref}/edit`}],D=t=>{t.preventDefault();const s={...r,date_expiration:r.date_expiration?c(r.date_expiration,"yyyy-MM-dd"):null,received_date:c(r.received_date,"yyyy-MM-dd")};b(route("central-stocks.update",a.ref),{data:s,onSuccess:()=>{x.success("Entrée de stock mise à jour avec succès")},onError:()=>{x.error("Une erreur est survenue lors de la mise à jour")}})};return e.jsxs(E,{breadcrumbs:w,children:[e.jsx(q,{title:"Modifier l'entrée de stock"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs(M,{children:[e.jsx(H,{children:e.jsx(L,{children:"Modification d'un produit"})}),e.jsx($,{children:e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:D,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"medical_produit_id",children:"Produit*"}),e.jsxs(p,{value:r.medical_produit_id||void 0,onValueChange:t=>d("medical_produit_id",t),required:!0,children:[e.jsx(h,{children:e.jsx(j,{placeholder:"Sélectionner un produit"})}),e.jsx(_,{children:S.map(t=>e.jsx(l,{value:t.id.toString(),children:t.name},t.id))})]}),i.medical_produit_id&&e.jsx("p",{className:"text-sm text-red-500",children:i.medical_produit_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"quantite",children:"Quantité*"}),e.jsx(u,{id:"quantite",type:"number",min:"1",value:r.quantite,onChange:t=>d("quantite",parseInt(t.target.value)),required:!0}),i.quantite&&e.jsx("p",{className:"text-sm text-red-500",children:i.quantite})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"numero_lot",children:"Numéro de lot"}),e.jsx(u,{id:"numero_lot",value:r.numero_lot,onChange:t=>d("numero_lot",t.target.value),placeholder:"Optionnel"}),i.numero_lot&&e.jsx("p",{className:"text-sm text-red-500",children:i.numero_lot})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"prix_unitaire",children:"Prix unitaire (FC)"}),e.jsx(u,{id:"prix_unitaire",type:"number",step:"0.01",min:"0",value:r.prix_unitaire||"",onChange:t=>d("prix_unitaire",t.target.value?parseFloat(t.target.value):null),placeholder:"Optionnel"}),i.prix_unitaire&&e.jsx("p",{className:"text-sm text-red-500",children:i.prix_unitaire})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"received_date",children:"Date de réception*"}),e.jsxs(v,{children:[e.jsx(f,{asChild:!0,children:e.jsxs(o,{variant:"outline",className:y("w-full justify-start text-left font-normal",!r.received_date&&"text-muted-foreground"),children:[e.jsx(C,{className:"mr-2 h-4 w-4"}),r.received_date?c(r.received_date,"PPP"):e.jsx("span",{children:"Choisir une date"})]})}),e.jsx(g,{className:"w-auto p-0",children:e.jsx(N,{mode:"single",selected:r.received_date,onSelect:t=>{if(t){const s=new Date(t);s.setHours(s.getHours()+1),d("received_date",s)}},initialFocus:!0})})]}),i.received_date&&e.jsx("p",{className:"text-sm text-red-500",children:i.received_date})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"date_expiration",children:"Date d'expiration"}),e.jsxs(v,{children:[e.jsx(f,{asChild:!0,children:e.jsxs(o,{variant:"outline",className:y("w-full justify-start text-left font-normal",!r.date_expiration&&"text-muted-foreground"),children:[e.jsx(C,{className:"mr-2 h-4 w-4"}),r.date_expiration?c(r.date_expiration,"PPP"):e.jsx("span",{children:"Choisir une date"})]})}),e.jsx(g,{className:"w-auto p-0",children:e.jsx(N,{mode:"single",selected:r.date_expiration||void 0,onSelect:t=>{if(t){const s=new Date(t);s.setHours(s.getHours()+1),d("date_expiration",s)}else d("date_expiration",null)},initialFocus:!0})})]}),i.date_expiration&&e.jsx("p",{className:"text-sm text-red-500",children:i.date_expiration})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"status",children:"Statut*"}),e.jsxs(p,{value:r.status,onValueChange:t=>d("status",t),required:!0,children:[e.jsx(h,{children:e.jsx(j,{placeholder:"Sélectionner un statut"})}),e.jsxs(_,{children:[e.jsx(l,{value:"disponible",children:"Disponible"}),e.jsx(l,{value:"reservee",children:"Réservée"}),e.jsx(l,{value:"expirer",children:"Expiré"}),e.jsx(l,{value:"endommage",children:"Endommagé"})]})]}),i.status&&e.jsx("p",{className:"text-sm text-red-500",children:i.status})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(o,{variant:"outline",asChild:!0,children:e.jsx(F,{href:route("central-stocks.index"),children:"Annuler"})}),e.jsx(o,{type:"submit",disabled:m,children:m?"Enregistrement...":"Enregistrer"})]})]})})})]})})})})]})}export{ne as default};
//# sourceMappingURL=Edit-TDyPEjdh.js.map
