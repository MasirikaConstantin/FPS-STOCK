import{r as w,K as M,t as d,m as b,j as e,L as R,S as C}from"./app-CQvyAInf.js";import{I as a}from"./input-error-B_lYJUJi.js";import{T as f}from"./text-link-BqNzoNGj.js";import{B as N}from"./button-qelRmArg.js";import{C as P}from"./checkbox-C38Q3IzS.js";import{I as t}from"./input-Blf29Qex.js";import{L as i}from"./label-DXuQz94P.js";import{T as V,a as _,b as y,c as E}from"./tabs-B7g3O5IH.js";import{A}from"./auth-layout-EdijR9jY.js";import{L as F}from"./loader-circle-BUgxsG8k.js";import"./app-CbyD8i4Z.js";import"./utils-jAU0Cazi.js";import"./index-Dh4Dnqzu.js";import"./index-Csg-B5yo.js";import"./index-D1Z7h3vH.js";import"./check-3WY5HJZB.js";import"./createLucideIcon-CDtDhRNb.js";import"./app-logo-icon-CYEPLqCw.js";function ie(){const[l,x]=w.useState("login"),{errors:j,flash:r,verifyMessage:c}=M().props;w.useEffect(()=>{r!=null&&r.error;const s=()=>{C.get(route("verification-mail"))};c&&d("Email non vérifié",{description:typeof c=="string"?c:String(c),action:{label:"Vérifier",onClick:s}})},[r,d]);const{data:p,setData:h,post:S,processing:n,errors:v,reset:L}=b({email:"",password:"",remember:!1}),{data:m,setData:g,post:T,processing:o,errors:u,reset:D}=b({name:"",email:"",password:"",password_confirmation:""}),k=s=>{s.preventDefault(),S(route("login"),{onFinish:()=>L("password"),onError:()=>{j.email}})},q=()=>{C.post(route("verification.send-to"),{email:m.email},{onSuccess:()=>d.success("Un lien de vérification a été envoyé !"),onError:s=>{s.email?d.error(s.email):d.error("Erreur lors de l'envoi du email de vérification")}})},I=s=>{s.preventDefault(),T(route("register"),{onFinish:()=>D("password","password_confirmation"),onSuccess:()=>{q()}})};return e.jsxs(A,{title:l==="login"?"Connexion":"Inscription",description:l==="login"?"Entrez votre email et mot de passe pour vous connecter":"Créez votre compte en remplissant le formulaire",children:[e.jsx(R,{title:l==="login"?"Connexion":"Inscription"}),(r==null?void 0:r.verifyMessage)&&e.jsx(a,{message:j.verifyMessage}),e.jsxs(V,{value:l,onValueChange:s=>x(s),className:"w-full",children:[e.jsxs(_,{className:"grid w-full grid-cols-2",children:[e.jsx(y,{value:"login",children:"Connexion"}),e.jsx(y,{value:"register",children:"Inscription"})]}),e.jsx(E,{value:"login",className:"pt-4",children:e.jsx("form",{className:"flex flex-col gap-6",onSubmit:k,children:e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"login-email",children:"Email"}),e.jsx(t,{id:"login-email",type:"email",required:!0,autoFocus:!0,autoComplete:"email",value:p.email,onChange:s=>h("email",s.target.value),placeholder:"email@exemple.com",disabled:n}),e.jsx(a,{message:v.email})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(i,{htmlFor:"login-password",children:"Mot de passe"}),e.jsx(f,{href:route("password.request"),className:"ml-auto text-sm",children:"Mot de passe oublié ?"})]}),e.jsx(t,{id:"login-password",type:"password",required:!0,autoComplete:"current-password",value:p.password,onChange:s=>h("password",s.target.value),placeholder:"••••••••",disabled:n}),e.jsx(a,{message:v.password})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(P,{id:"remember",name:"remember",checked:p.remember,onClick:()=>h("remember",!p.remember),disabled:n}),e.jsx(i,{htmlFor:"remember",children:"Se souvenir de moi"})]}),e.jsxs(N,{type:"submit",className:"mt-4 w-full",disabled:n,children:[n&&e.jsx(F,{className:"h-4 w-4 animate-spin"}),"Se connecter"]})]})})}),e.jsx(E,{value:"register",className:"pt-4",children:e.jsx("form",{className:"flex flex-col gap-6",onSubmit:I,children:e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"register-name",children:"Nom complet"}),e.jsx(t,{id:"register-name",type:"text",required:!0,autoFocus:!0,autoComplete:"name",value:m.name,onChange:s=>g("name",s.target.value),disabled:o,placeholder:"Votre nom complet"}),e.jsx(a,{message:u.name})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"register-email",children:"Email"}),e.jsx(t,{id:"register-email",type:"email",required:!0,autoComplete:"email",value:m.email,onChange:s=>g("email",s.target.value),disabled:o,placeholder:"email@exemple.com"}),e.jsx(a,{message:u.email})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"register-password",children:"Mot de passe"}),e.jsx(t,{id:"register-password",type:"password",required:!0,autoComplete:"new-password",value:m.password,onChange:s=>g("password",s.target.value),disabled:o,placeholder:"••••••••"}),e.jsx(a,{message:u.password})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"register-password-confirmation",children:"Confirmer le mot de passe"}),e.jsx(t,{id:"register-password-confirmation",type:"password",required:!0,autoComplete:"new-password",value:m.password_confirmation,onChange:s=>g("password_confirmation",s.target.value),disabled:o,placeholder:"••••••••"}),e.jsx(a,{message:u.password_confirmation})]}),e.jsxs(N,{type:"submit",className:"mt-2 w-full",disabled:o,children:[o&&e.jsx(F,{className:"h-4 w-4 animate-spin"}),"S'inscrire"]})]})})})]}),e.jsx("div",{className:"mt-4 text-center text-sm text-muted-foreground",children:l==="login"?e.jsxs(e.Fragment,{children:["Pas encore de compte ? ",e.jsx(f,{href:route("register"),onClick:()=>x("register"),children:"S'inscrire"})]}):e.jsxs(e.Fragment,{children:["Déjà un compte ? ",e.jsx(f,{href:route("login"),onClick:()=>x("login"),children:"Se connecter"})]})})]})}export{ie as default};
//# sourceMappingURL=auth-CqIcC-FY.js.map
