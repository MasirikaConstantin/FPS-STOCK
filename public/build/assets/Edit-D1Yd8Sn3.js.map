{"version":3,"file":"Edit-D1Yd8Sn3.js","sources":["../../../resources/js/pages/MedicalProduits/Edit.tsx"],"sourcesContent":["import AppLayout from '@/layouts/app-layout';\nimport { BreadcrumbItem } from '@/types';\nimport { PageProps } from '@/types/types';\nimport { Head, Link, router, useForm } from '@inertiajs/react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Switch } from '@/components/ui/switch';\nimport { toast } from 'sonner';\nimport { FormEventHandler } from 'react';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\n\nexport default function Edit({ produit, categories, fournisseurs }: PageProps<{ \n    produit: App.MedicalProduit, \n    categories: App.Categorie[],\n    fournisseurs: App.Fournisseur[]\n}>) {\n    const { data, setData, put, processing, errors } = useForm({\n        name: produit.name,\n        categorie_id: produit.categorie_id.toString(),\n        sous_category: produit.sous_category || '',\n        unite: produit.unite,\n        description: produit.description || '',\n        fabrican: produit.fabrican || '',\n        fournisseur_id: produit.fournisseur_id?.toString() || '',\n        requires_refrigeration: produit.requires_refrigeration,\n        duree_vie: produit.duree_vie,\n        seuil_min: produit.seuil_min,\n        prix_unitaire: produit.prix_unitaire,\n        is_active: produit.is_active,\n    });\n\n    const breadcrumbs: BreadcrumbItem[] = [\n        {\n            title: 'Produits Médicaux',\n            href: '/medical-produits',\n        },\n        {\n            title: 'Modifier ' + produit.name,\n            href: `/medical-produits/${produit.ref}/edit`,\n        },\n    ];\n\n    const submit: FormEventHandler = (e) => {\n        e.preventDefault();\n\n        put(route('medical-produits.update', produit.id), {\n            onSuccess: () => {\n                toast.success('Produit mis à jour avec succès');\n            },\n            onError: () => {\n                toast.error('Une erreur est survenue lors de la mise à jour');\n            },\n        });\n    };\n\n    return (\n        <AppLayout breadcrumbs={breadcrumbs}>\n            <Head title={`Modifier ${produit.name}`} />\n\n            <div className=\"py-12\">\n                <div className=\"mx-auto max-w-7xl sm:px-6 lg:px-8\">\n                    <div className=\"overflow-hidden shadow-sm sm:rounded-lg\">\n                        <Card>\n                            <CardHeader>\n                                <CardTitle>Modifier {produit.name}</CardTitle>\n                            </CardHeader>\n                            <CardContent>\n                            <div className=\"p-6\">\n                            <form onSubmit={submit} className=\"space-y-6\">\n                                <div className=\"grid grid-cols-1 gap-6 md:grid-cols-2\">\n                                    <div className=\"space-y-2\">\n                                        <Label htmlFor=\"name\">Nom du produit*</Label>\n                                        <Input\n                                            id=\"name\"\n                                            value={data.name}\n                                            onChange={(e) => setData('name', e.target.value)}\n                                            placeholder=\"Nom du produit\"\n                                            required\n                                        />\n                                        {errors.name && <p className=\"text-sm text-red-500\">{errors.name}</p>}\n                                    </div>\n\n                                    <div className=\"space-y-2\">\n                                        <Label htmlFor=\"categorie_id\">Catégorie*</Label>\n                                        <Select\n                                            value={data.categorie_id || undefined} // Convertit \"\" en undefined pour le placeholder\n                                            onValueChange={(value) => setData('categorie_id', value)}\n                                            required\n                                        >\n                                            <SelectTrigger>\n                                            <SelectValue placeholder=\"Sélectionner une catégorie\" />\n                                            </SelectTrigger>\n                                            <SelectContent>\n                                            {categories.map((categorie) => (\n                                                <SelectItem \n                                                key={categorie.id} \n                                                value={categorie.id?.toString() || \"undefined\"} // Garantit une valeur non-vide\n                                                >\n                                                {categorie.nom}\n                                                </SelectItem>\n                                            ))}\n                                            </SelectContent>\n                                        </Select>\n                                        {errors.categorie_id && <p className=\"text-sm text-red-500\">{errors.categorie_id}</p>}\n                                        </div>\n\n                                    <div className=\"space-y-2\">\n                                        <Label htmlFor=\"sous_category\">Sous-catégorie</Label>\n                                        <Input\n                                            id=\"sous_category\"\n                                            value={data.sous_category}\n                                            onChange={(e) => setData('sous_category', e.target.value)}\n                                            placeholder=\"Sous-catégorie (optionnel)\"\n                                        />\n                                        {errors.sous_category && <p className=\"text-sm text-red-500\">{errors.sous_category}</p>}\n                                    </div>\n\n                                    <div className=\"space-y-2\">\n                                        <Label htmlFor=\"unite\">Unité*</Label>\n                                        <Input\n                                            id=\"unite\"\n                                            value={data.unite}\n                                            onChange={(e) => setData('unite', e.target.value)}\n                                            placeholder=\"Unité (ex: boite, flacon, etc.)\"\n                                            required\n                                        />\n                                        {errors.unite && <p className=\"text-sm text-red-500\">{errors.unite}</p>}\n                                    </div>\n\n                                    <div className=\"space-y-2\">\n                                        <Label htmlFor=\"fabrican\">Fabricant</Label>\n                                        <Input\n                                            id=\"fabrican\"\n                                            value={data.fabrican}\n                                            onChange={(e) => setData('fabrican', e.target.value)}\n                                            placeholder=\"Fabricant (optionnel)\"\n                                        />\n                                        {errors.fabrican && <p className=\"text-sm text-red-500\">{errors.fabrican}</p>}\n                                    </div>\n\n                                    <div className=\"space-y-2\">\n                                        <Label htmlFor=\"fournisseur_id\">Fournisseur</Label>\n                                        <Select\n                                            value={data.fournisseur_id || \"null\"} // \"null\" est utilisé pour représenter \"Aucun fournisseur\"\n                                            onValueChange={(value) => setData('fournisseur_id', value === \"null\" ? null : value)}\n                                        >\n                                            <SelectTrigger>\n                                            <SelectValue placeholder=\"Sélectionner un fournisseur\" />\n                                            </SelectTrigger>\n                                            <SelectContent>\n                                            <SelectItem value=\"null\">Aucun fournisseur</SelectItem> {/* Valeur spéciale */}\n                                            {fournisseurs.map((fournisseur) => (\n                                                <SelectItem \n                                                key={fournisseur.id} \n                                                value={fournisseur.id.toString()}\n                                                >\n                                                {fournisseur.nom}\n                                                </SelectItem>\n                                            ))}\n                                            </SelectContent>\n                                        </Select>\n                                        {errors.fournisseur_id && <p className=\"text-sm text-red-500\">{errors.fournisseur_id}</p>}\n                                        </div>\n\n                                    <div className=\"space-y-2\">\n                                        <Label htmlFor=\"prix_unitaire\">Prix unitaire (FC)*</Label>\n                                        <Input\n                                            id=\"prix_unitaire\"\n                                            type=\"number\"\n                                            step=\"0.01\"\n                                            min=\"0\"\n                                            value={data.prix_unitaire}\n                                            onChange={(e) => setData('prix_unitaire', parseFloat(e.target.value))}\n                                            placeholder=\"0.00\"\n                                            required\n                                        />\n                                        {errors.prix_unitaire && <p className=\"text-sm text-red-500\">{errors.prix_unitaire}</p>}\n                                    </div>\n\n                                    <div className=\"space-y-2\">\n                                        <Label htmlFor=\"seuil_min\">Seuil minimum de stock*</Label>\n                                        <Input\n                                            id=\"seuil_min\"\n                                            type=\"number\"\n                                            min=\"0\"\n                                            value={data.seuil_min}\n                                            onChange={(e) => setData('seuil_min', parseInt(e.target.value))}\n                                            placeholder=\"0\"\n                                            required\n                                        />\n                                        {errors.seuil_min && <p className=\"text-sm text-red-500\">{errors.seuil_min}</p>}\n                                    </div>\n\n                                    <div className=\"space-y-2\">\n                                        <Label htmlFor=\"duree_vie\">Durée de vie (mois)*</Label>\n                                        <Input\n                                            id=\"duree_vie\"\n                                            type=\"number\"\n                                            min=\"1\"\n                                            value={data.duree_vie}\n                                            onChange={(e) => setData('duree_vie', parseInt(e.target.value))}\n                                            placeholder=\"36\"\n                                            required\n                                        />\n                                        {errors.duree_vie && <p className=\"text-sm text-red-500\">{errors.duree_vie}</p>}\n                                    </div>\n\n                                    <div className=\"flex items-center space-x-2 pt-2\">\n                                        <Checkbox\n                                            id=\"requires_refrigeration\"\n                                            checked={data.requires_refrigeration}\n                                            onCheckedChange={(checked) => setData('requires_refrigeration', !!checked)}\n                                        />\n                                        <Label htmlFor=\"requires_refrigeration\">Nécessite réfrigération</Label>\n                                    </div>\n\n                                    <div className=\"flex items-center space-x-2 pt-2\">\n                                        <Switch\n                                            id=\"is_active\"\n                                            checked={data.is_active}\n                                            onCheckedChange={(checked) => setData('is_active', checked)}\n                                        />\n                                        <Label htmlFor=\"is_active\">Produit actif</Label>\n                                    </div>\n                                </div>\n\n                                <div className=\"space-y-2\">\n                                    <Label htmlFor=\"description\">Description</Label>\n                                    <Textarea\n                                        id=\"description\"\n                                        value={data.description}\n                                        onChange={(e) => setData('description', e.target.value)}\n                                        placeholder=\"Description du produit (optionnel)\"\n                                        rows={4}\n                                    />\n                                    {errors.description && <p className=\"text-sm text-red-500\">{errors.description}</p>}\n                                </div>\n\n                                <div className=\"flex justify-end space-x-4\">\n                                    <Button variant=\"outline\" asChild>\n                                        <Link href={route('medical-produits.index')}>Annuler</Link>\n                                    </Button>\n                                    <Button type=\"submit\" disabled={processing}>\n                                        {processing ? 'Enregistrement...' : 'Enregistrer'}\n                                    </Button>\n                                </div>\n                            </form>\n                        </div>\n                            </CardContent>\n                        </Card>\n                        \n                    </div>\n                </div>\n            </div>\n        </AppLayout>\n    );\n}"],"names":["Edit","produit","categories","fournisseurs","data","setData","put","processing","errors","useForm","_a","breadcrumbs","submit","e","toast","jsxs","AppLayout","jsx","Head","Card","CardHeader","CardTitle","CardContent","Label","Input","Select","value","SelectTrigger","SelectValue","SelectContent","categorie","SelectItem","fournisseur","Checkbox","checked","Switch","Textarea","Button","Link"],"mappings":"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"}