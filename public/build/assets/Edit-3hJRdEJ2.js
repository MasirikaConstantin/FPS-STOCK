import{m as q,j as e,L as E,$ as M,t as v}from"./app-CfIQfryc.js";import{A as H}from"./app-layout-DBCqPTBR.js";import{B as o}from"./button-By8FOct-.js";import{I as u}from"./input-3mQeuo9Z.js";import{L as l}from"./label-Bc_E8aZ_.js";import{S as m,a as x,b as p,c as h,d as n}from"./select-mimKbrnD.js";import{P as f,a as g,b as N,C as y}from"./popover-Bwc6Or8j.js";import{c as C}from"./utils-jAU0Cazi.js";import{C as L,a as $,b as I,c as V}from"./card-DdvJbsWn.js";import{C as S}from"./calendar-bdeeE0z-.js";import{f as c}from"./format-DoAzcPNu.js";import"./app-XAPMnnx3.js";import"./index-F55flZwV.js";import"./createLucideIcon-DjaE45rK.js";import"./index-BSyT1Gdz.js";import"./index-B8Z1OlCE.js";import"./app-logo-icon-Cf6SMoi-.js";import"./car-front-B2ibBUtT.js";import"./package-CAWIZc5k.js";import"./index-wsb6SjUi.js";import"./check-Ble_Z7EH.js";import"./en-US-DCG5IRVV.js";import"./endOfMonth-BujD7vy8.js";import"./chevron-left-AYmClmtv.js";function ne({stock:a,produits:b,hopitals:w}){var _;const{data:i,setData:s,put:D,processing:j,errors:r}=q({medical_produit_id:a.medical_produit_id.toString(),quantite:a.quantite,numero_lot:a.numero_lot||"",date_expiration:a.date_expiration?new Date(a.date_expiration):null,prix_unitaire:a.prix_unitaire,received_date:new Date(a.received_date),status:a.status,hopital_id:((_=a.hopital_id)==null?void 0:_.toString())||null}),F=[{title:"Gestion des Stocks",href:"/stocks"},{title:`Modifier l'entrée ${a.id}`,href:`/stocks/${a.ref}/edit`}],P=t=>{t.preventDefault();const d={...i,date_expiration:i.date_expiration?c(i.date_expiration,"yyyy-MM-dd"):null,received_date:c(i.received_date,"yyyy-MM-dd")};D(route("stocks.update",a.ref),{data:d,onSuccess:()=>{v.success("Entrée de stock mise à jour avec succès")},onError:()=>{v.error("Une erreur est survenue lors de la mise à jour")}})};return e.jsxs(H,{breadcrumbs:F,children:[e.jsx(E,{title:"Modifier l'entrée de stock"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs(L,{children:[e.jsx($,{children:e.jsx(I,{children:"Modification d'un Stock"})}),e.jsx(V,{children:e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:P,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"medical_produit_id",children:"Produit*"}),e.jsxs(m,{value:i.medical_produit_id||void 0,onValueChange:t=>s("medical_produit_id",t),required:!0,children:[e.jsx(x,{children:e.jsx(p,{placeholder:"Sélectionner un produit"})}),e.jsx(h,{children:b.map(t=>e.jsx(n,{value:t.id.toString(),children:t.name},t.id))})]}),r.medical_produit_id&&e.jsx("p",{className:"text-sm text-red-500",children:r.medical_produit_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"quantite",children:"Quantité*"}),e.jsx(u,{id:"quantite",type:"number",min:"1",value:i.quantite,onChange:t=>s("quantite",parseInt(t.target.value)),required:!0}),r.quantite&&e.jsx("p",{className:"text-sm text-red-500",children:r.quantite})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"numero_lot",children:"Numéro de lot"}),e.jsx(u,{id:"numero_lot",value:i.numero_lot,onChange:t=>s("numero_lot",t.target.value),placeholder:"Optionnel"}),r.numero_lot&&e.jsx("p",{className:"text-sm text-red-500",children:r.numero_lot})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"prix_unitaire",children:"Prix unitaire (FC)"}),e.jsx(u,{id:"prix_unitaire",type:"number",step:"0.01",min:"0",value:i.prix_unitaire||"",onChange:t=>s("prix_unitaire",t.target.value?parseFloat(t.target.value):null),placeholder:"Optionnel"}),r.prix_unitaire&&e.jsx("p",{className:"text-sm text-red-500",children:r.prix_unitaire})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"received_date",children:"Date de réception*"}),e.jsxs(f,{children:[e.jsx(g,{asChild:!0,children:e.jsxs(o,{variant:"outline",className:C("w-full justify-start text-left font-normal",!i.received_date&&"text-muted-foreground"),children:[e.jsx(S,{className:"mr-2 h-4 w-4"}),i.received_date?c(i.received_date,"PPP"):e.jsx("span",{children:"Choisir une date"})]})}),e.jsx(N,{className:"w-auto p-0",children:e.jsx(y,{mode:"single",selected:i.received_date,onSelect:t=>{if(t){const d=new Date(t);d.setHours(d.getHours()+1),s("received_date",d)}},initialFocus:!0})})]}),r.received_date&&e.jsx("p",{className:"text-sm text-red-500",children:r.received_date})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"date_expiration",children:"Date d'expiration"}),e.jsxs(f,{children:[e.jsx(g,{asChild:!0,children:e.jsxs(o,{variant:"outline",className:C("w-full justify-start text-left font-normal",!i.date_expiration&&"text-muted-foreground"),children:[e.jsx(S,{className:"mr-2 h-4 w-4"}),i.date_expiration?c(i.date_expiration,"PPP"):e.jsx("span",{children:"Choisir une date"})]})}),e.jsx(N,{className:"w-auto p-0",children:e.jsx(y,{mode:"single",selected:i.date_expiration||void 0,onSelect:t=>{if(t){const d=new Date(t);d.setHours(d.getHours()+1),s("date_expiration",d)}else s("date_expiration",null)},initialFocus:!0})})]}),r.date_expiration&&e.jsx("p",{className:"text-sm text-red-500",children:r.date_expiration})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"hopital_id",children:"Emplacement"}),e.jsxs(m,{value:i.hopital_id===null?"null":i.hopital_id||void 0,onValueChange:t=>s("hopital_id",t==="null"?null:t),children:[e.jsx(x,{children:e.jsx(p,{placeholder:"Stock central"})}),e.jsxs(h,{children:[e.jsx(n,{value:"null",children:"Stock central"}),w.map(t=>e.jsx(n,{value:t.id.toString(),children:t.nom},t.id))]})]}),r.hopital_id&&e.jsx("p",{className:"text-sm text-red-500",children:r.hopital_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"status",children:"Statut*"}),e.jsxs(m,{value:i.status,onValueChange:t=>s("status",t),required:!0,children:[e.jsx(x,{children:e.jsx(p,{placeholder:"Sélectionner un statut"})}),e.jsxs(h,{children:[e.jsx(n,{value:"disponible",children:"Disponible"}),e.jsx(n,{value:"reservee",children:"Réservée"}),e.jsx(n,{value:"expirer",children:"Expiré"}),e.jsx(n,{value:"endommage",children:"Endommagé"})]})]}),r.status&&e.jsx("p",{className:"text-sm text-red-500",children:r.status})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(o,{variant:"outline",asChild:!0,children:e.jsx(M,{href:route("stocks.index"),children:"Annuler"})}),e.jsx(o,{type:"submit",disabled:j,children:j?"Enregistrement...":"Enregistrer"})]})]})})})]})})})})]})}export{ne as default};
//# sourceMappingURL=Edit-3hJRdEJ2.js.map
