import{r as l,m as g,j as e,L as C,t as m,S as v}from"./app-CSjzvEdl.js";import{B as N}from"./button-DKtJZtgI.js";import{L as d}from"./label-Lx0dL3y0.js";import{S as P,a as y,b as L,c as $,d as A}from"./select-CWgXAWFB.js";import{A as k}from"./app-layout-BI0sLpWU.js";import{C as E,a as M,b as w,c as B}from"./card-CbEGrNjZ.js";import"./app-DCR4OZ8t.js";import"./index-CgyB2gb4.js";import"./utils-jAU0Cazi.js";import"./index-DtfqDP5q.js";import"./index-BHeidSKY.js";import"./createLucideIcon-Bm1i9eVH.js";import"./check-BP1rGdyQ.js";import"./index-DtyIfu9z.js";import"./app-logo-icon-sN9k3MyY.js";import"./car-front-BKurbF1U.js";import"./package-C3gqZCnc.js";function Y({models:n,defaultPermissions:p}){const[r,u]=l.useState(""),[t,x]=l.useState([]),{setData:o,post:h,processing:c}=g({model:"",permissions:[]}),j=s=>{s.preventDefault(),h(route("admin.permissions.store"),{onSuccess:()=>{m.success("Permission créée avec succès"),v.visit(route("admin.permissions.index"))},onError:()=>m.error("Une erreur est survenue lors de la création")})},b=()=>{if(!r)return[];const s=r.toLowerCase()+"s";return Object.entries(p).map(([i,a])=>({name:`${s}.${i}`,description:`${a} ${s}`,action:i,module:s}))},f=[{title:"Accueil",href:route("dashboard")},{title:"Gestion des Permissions",href:route("admin.permissions.index")},{title:"Créer des Permissions",href:route("admin.permissions.create")}];return e.jsxs(k,{breadcrumbs:f,children:[e.jsx(C,{title:"Créer des Permissions"}),e.jsx("div",{className:"p-6",children:e.jsxs(E,{children:[e.jsx(M,{children:e.jsx(w,{children:"Nouvelles Permissions"})}),e.jsx(B,{children:e.jsx("div",{className:"",children:e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"model",children:"Modèle"}),e.jsxs(P,{onValueChange:s=>{u(s),o("model",s)},value:r,children:[e.jsx(y,{children:e.jsx(L,{placeholder:"Sélectionnez un modèle"})}),e.jsx($,{children:(Array.isArray(n)?n:Object.values(n)).map(s=>e.jsx(A,{value:s,children:s},s))})]})]}),r&&e.jsxs("div",{className:"space-y-4",children:[e.jsx(d,{children:"Permissions à générer"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:b().map(s=>e.jsxs("div",{className:"flex items-center space-x-2 p-3 border rounded",children:[e.jsx("input",{type:"checkbox",id:`perm-${s.name}`,checked:t.includes(s.name),onChange:i=>{const a=i.target.checked?[...t,s.name]:t.filter(S=>S!==s.name);x(a),o("permissions",a)},className:"rounded text-indigo-600"}),e.jsxs("label",{htmlFor:`perm-${s.name}`,className:"text-sm",children:[e.jsx("span",{className:"font-medium block",children:s.name}),e.jsx("span",{className:"text-gray-500",children:s.description})]})]},s.name))})]}),e.jsx(N,{type:"submit",disabled:c||!r||t.length===0,children:c?"Création...":"Créer les Permissions"})]})})})]})})]})}export{Y as default};
//# sourceMappingURL=Create-BWhDTaQU.js.map
