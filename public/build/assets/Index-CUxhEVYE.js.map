{"version":3,"file":"Index-CUxhEVYE.js","sources":["../../../resources/js/pages/Fournisseurs/Index.tsx"],"sourcesContent":["import {\n    AlertDialog,\n    AlertDialogAction,\n    AlertDialogCancel,\n    AlertDialogContent,\n    AlertDialogDescription,\n    AlertDialogFooter,\n    AlertDialogHeader,\n    AlertDialogTitle,\n} from '@/components/ui/alert-dialog';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger } from '@/components/ui/dropdown-menu';\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\nimport AppLayout from '@/layouts/app-layout';\nimport { BreadcrumbItem } from '@/types';\nimport { App, PageProps } from '@/types/types';\nimport { Head, Link, router } from '@inertiajs/react';\nimport { Eye, MoreHorizontal, Pencil, Trash2 } from 'lucide-react';\nimport { useState } from 'react';\nimport { toast } from 'sonner';\n\nexport default function Index({ fournisseurs }: PageProps<{ fournisseurs: App.Fournisseur[] }>) {\n    const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\n    const [fournisseurToDelete, setFournisseurToDelete] = useState<App.Fournisseur | null>(null);\n    const [openDropdownId, setOpenDropdownId] = useState<string | null>(null);\n\n    const breadcrumbs: BreadcrumbItem[] = [\n        {\n            title: 'Fournisseurs',\n            href: '/fournisseurs',\n        },\n    ];\n\n    const handleDelete = (fournisseur: App.Fournisseur) => {\n        setFournisseurToDelete(fournisseur);\n        setDeleteDialogOpen(true);\n        setOpenDropdownId(null);\n    };\n\n    const confirmDelete = () => {\n        if (!fournisseurToDelete) return;\n\n        router.delete(route('fournisseurs.destroy', fournisseurToDelete.ref), {\n            preserveScroll: true,\n            onSuccess: () => {\n                toast.success('Fournisseur supprimé avec succès');\n                setDeleteDialogOpen(false);\n            },\n            onError: () => {\n                toast.error('Une erreur est survenue lors de la suppression');\n            },\n            onFinish: () => {\n                setOpenDropdownId(null);\n            },\n        });\n    };\n\n    const formatDate = (dateString: string | null) => {\n        if (!dateString) return '-';\n        return new Date(dateString).toLocaleDateString();\n    };\n\n    return (\n        <AppLayout breadcrumbs={breadcrumbs}>\n            <Head title=\"Gestion des Fournisseurs\" />\n\n            <div className=\"py-12\">\n                <div className=\"mx-auto max-w-7xl sm:px-6 lg:px-8\">\n                    <div className=\"overflow-hidden shadow-sm sm:rounded-lg\">\n                        <Card>\n                            <CardHeader className=\"flex flex-row items-center justify-between space-y-0\">\n                                <CardTitle className=\"text-xl font-semibold\">Gestion des Fournisseurs</CardTitle>\n                                <Link href={route('fournisseurs.create')} className=\"text-white\">\n                                    <Button>Nouveau Fournisseur</Button>\n                                </Link>\n                            </CardHeader>\n                            <CardContent>\n                            <div className=\"p-6\">\n                            <Table className=\"dark:text-gray-400cell w-full text-left text-sm text-gray-500 rtl:text-right\">\n                                <TableHeader>\n                                    <TableRow>\n                                        <TableHead>Nom</TableHead>\n                                        <TableHead>Contact</TableHead>\n                                        <TableHead>Spécialités</TableHead>\n                                        <TableHead>Statut</TableHead>\n                                        <TableHead>Créé par</TableHead>\n                                        <TableHead>Date de création</TableHead>\n                                        <TableHead>Actions</TableHead>\n                                    </TableRow>\n                                </TableHeader>\n                                <TableBody>\n                                    {fournisseurs && fournisseurs.length > 0 ? (\n                                        fournisseurs.map((fournisseur) => (\n                                            <TableRow key={fournisseur.id}>\n                                                <TableCell className=\"font-medidum text-black dark:text-white\">\n                                                    {fournisseur.nom}\n                                                </TableCell>\n                                                <TableCell>\n                                                    {fournisseur.contact_person || '-'}\n                                                    {fournisseur.phone && (\n                                                        <div className=\"text-sm text-gray-500\">{fournisseur.phone}</div>\n                                                    )}\n                                                </TableCell>\n                                                <TableCell>\n                                                    {Array.isArray(fournisseur.specialties) && fournisseur.specialties.length > 0 ? (\n                                                        <div className=\"flex flex-wrap gap-1\">\n                                                        {fournisseur.specialties.map((specialty, index) => (\n                                                            <Badge key={index} variant=\"outline\">\n                                                            {specialty}\n                                                            </Badge>\n                                                        ))}\n                                                        </div>\n                                                    ) : (\n                                                        '-'\n                                                    )}\n                                                    </TableCell>\n                                                \n                                                <TableCell>\n                                                    <Badge variant={fournisseur.is_active ? 'default' : 'destructive'}>\n                                                        {fournisseur.is_active ? 'Actif' : 'Inactif'}\n                                                    </Badge>\n                                                </TableCell>\n                                                <TableCell>{fournisseur.creator?.name || 'Système'}</TableCell>\n                                                <TableCell>{formatDate(fournisseur.created_at)}</TableCell>\n                                                <TableCell>\n                                                    <DropdownMenu\n                                                        open={openDropdownId === fournisseur.ref}\n                                                        onOpenChange={(open) => {\n                                                            setOpenDropdownId(open ? fournisseur.ref : null);\n                                                        }}\n                                                    >\n                                                        <DropdownMenuTrigger asChild>\n                                                            <Button\n                                                                variant=\"ghost\"\n                                                                className=\"h-8 w-8 p-0\"\n                                                                onClick={(e) => e.stopPropagation()}\n                                                            >\n                                                                <MoreHorizontal className=\"h-4 w-4\" />\n                                                            </Button>\n                                                        </DropdownMenuTrigger>\n                                                        <DropdownMenuContent\n                                                            align=\"end\"\n                                                            onInteractOutside={() => setOpenDropdownId(null)}\n                                                        >\n                                                            <DropdownMenuItem asChild>\n                                                                <Link\n                                                                    href={route('fournisseurs.show', fournisseur.ref)}\n                                                                    className=\"flex items-center\"\n                                                                    onClick={() => setOpenDropdownId(null)}\n                                                                >\n                                                                    <Eye className=\"mr-2 h-4 w-4\" />\n                                                                    Voir\n                                                                </Link>\n                                                            </DropdownMenuItem>\n                                                            <DropdownMenuItem asChild>\n                                                                <Link\n                                                                    href={route('fournisseurs.edit', fournisseur.ref)}\n                                                                    className=\"flex items-center\"\n                                                                    onClick={() => setOpenDropdownId(null)}\n                                                                >\n                                                                    <Pencil className=\"mr-2 h-4 w-4\" />\n                                                                    Modifier\n                                                                </Link>\n                                                            </DropdownMenuItem>\n                                                            <DropdownMenuItem\n                                                                className=\"text-red-600 focus:bg-red-50 focus:text-red-600\"\n                                                                onClick={(e) => {\n                                                                    e.preventDefault();\n                                                                    handleDelete(fournisseur);\n                                                                    setOpenDropdownId(null);\n                                                                }}\n                                                            >\n                                                                <Trash2 className=\"mr-2 h-4 w-4\" />\n                                                                Supprimer\n                                                            </DropdownMenuItem>\n                                                        </DropdownMenuContent>\n                                                    </DropdownMenu>\n                                                </TableCell>\n                                            </TableRow>\n                                        ))\n                                    ) : (\n                                        <TableRow>\n                                            <TableCell colSpan={8} className=\"py-4 text-center\">\n                                                <div className=\"text-gray-500\">Aucun fournisseur trouvé.</div>\n                                                <Button asChild variant=\"link\" className=\"mt-2\">\n                                                    <Link href={route('fournisseurs.create')}>Créer un fournisseur</Link>\n                                                </Button>\n                                            </TableCell>\n                                        </TableRow>\n                                    )}\n                                </TableBody>\n                            </Table>\n                        </div>\n                            </CardContent>\n                                \n                            \n                        </Card>\n                        \n                    </div>\n                </div>\n            </div>\n\n            <AlertDialog open={deleteDialogOpen} onOpenChange={setDeleteDialogOpen}>\n                <AlertDialogContent>\n                    <AlertDialogHeader>\n                        <AlertDialogTitle>Êtes-vous sûr ?</AlertDialogTitle>\n                        <AlertDialogDescription>\n                            Cette action supprimera définitivement le fournisseur \"{fournisseurToDelete?.nom}\" et ne pourra pas être annulée.\n                        </AlertDialogDescription>\n                    </AlertDialogHeader>\n                    <AlertDialogFooter>\n                        <AlertDialogCancel>Annuler</AlertDialogCancel>\n                        <AlertDialogAction onClick={confirmDelete}>Supprimer</AlertDialogAction>\n                    </AlertDialogFooter>\n                </AlertDialogContent>\n            </AlertDialog>\n        </AppLayout>\n    );\n}"],"names":["Index","fournisseurs","deleteDialogOpen","setDeleteDialogOpen","useState","fournisseurToDelete","setFournisseurToDelete","openDropdownId","setOpenDropdownId","breadcrumbs","handleDelete","fournisseur","confirmDelete","router","toast","formatDate","dateString","jsxs","AppLayout","jsx","Head","Card","CardHeader","CardTitle","Link","Button","CardContent","Table","TableHeader","TableRow","TableHead","TableBody","TableCell","specialty","index","Badge","_a","DropdownMenu","open","DropdownMenuTrigger","e","MoreHorizontal","DropdownMenuContent","DropdownMenuItem","Eye","Pencil","Trash2","AlertDialog","AlertDialogContent","AlertDialogHeader","AlertDialogTitle","AlertDialogDescription","AlertDialogFooter","AlertDialogCancel","AlertDialogAction"],"mappings":"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"}